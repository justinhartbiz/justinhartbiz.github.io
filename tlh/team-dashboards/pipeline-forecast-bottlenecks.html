<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Pipeline Forecast & Bottlenecks</title><script src='https://cdn.jsdelivr.net/npm/chart.js'></script><style>body{margin:0;background:#0a0f1d;color:#eaf1ff;font-family:Inter,system-ui}.wrap{max-width:1200px;margin:auto;padding:24px}.card{background:#111a30;border:1px solid #213353;border-radius:12px;padding:14px;margin-top:12px}.row{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}.k{font-size:28px;font-weight:700}.mut{color:#9db1d6;font-size:12px}table{width:100%;border-collapse:collapse}th,td{padding:8px;border-bottom:1px solid #233657;text-align:left}</style></head><body><div class='wrap'><h1>Pipeline Forecast & Bottlenecks</h1><div class='mut'>Stage health + weighted close forecast.</div><div class='row' id='kp'></div><div class='card'><canvas id='funnel' height='95'></canvas></div><div class='card'><h3>Bottleneck Diagnostics</h3><table><thead><tr><th>Stage</th><th>Count</th><th>Conv. to Next</th><th>Status</th></tr></thead><tbody id='tb'></tbody></table></div></div><script>const s=[['New',84,.58],['Working',49,.52],['Connected',26,.46],['Qualified',12,.42],['Closed Won',11,1]];const avgDeal=22000;const weighted=s.slice(0,-1).reduce((a,[,count,p],i)=>a+count*s.slice(i+1,-1).reduce((x,[,,q])=>x*q,p),0);const fRev=weighted*avgDeal;kp.innerHTML=`<div class='card'><div class='mut'>Open Opps</div><div class='k'>${s.slice(0,-1).reduce((a,b)=>a+b[1],0)}</div></div><div class='card'><div class='mut'>Closed Won</div><div class='k'>${s.at(-1)[1]}</div></div><div class='card'><div class='mut'>Weighted Deals</div><div class='k'>${weighted.toFixed(1)}</div></div><div class='card'><div class='mut'>Forecast Value</div><div class='k'>$${Math.round(fRev/1000)}k</div></div>`;new Chart(funnel,{type:'bar',data:{labels:s.map(x=>x[0]),datasets:[{label:'Count',data:s.map(x=>x[1]),backgroundColor:'#60a5fa'}]},options:{plugins:{legend:{labels:{color:'#dbeafe'}}},scales:{x:{ticks:{color:'#9db1d6'}},y:{ticks:{color:'#9db1d6'}}}}});tb.innerHTML=s.slice(0,-1).map(([name,count,conv])=>{const st=conv<.45?'âš  bottleneck':conv<.55?'watch':'healthy';return `<tr><td>${name}</td><td>${count}</td><td>${(conv*100).toFixed(0)}%</td><td>${st}</td></tr>`}).join('');</script></body></html>