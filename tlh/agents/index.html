<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TLH Agent Orchestra - Unified Architecture</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --teal: #38B6B2;
            --purple: #A47EAF;
            --navy: #0D3B66;
            --blue: #0F4676;
            --dark-text: #333333;
            --light-bg: #F8F9FA;
            --light-gray: #F0F0F2;
            --muted: #6B6B78;
            --border-light: #E5E5E5;
            --success-green: #4ade80;
            --warning-orange: #FFA500;
            --danger-red: #D66D50;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--light-bg);
            color: var(--dark-text);
            font-family: 'Lato', sans-serif;
            overflow-x: hidden;
            margin: 0;
            padding: 20px;
        }

        h1, h2, h3, h4, .serif {
            font-family: 'Lato', sans-serif;
            font-weight: 700;
        }

        .starfield,
        .planet-horizon {
            display: none;
        }

        .glass-panel {
            background: #fff;
            border: 1px solid var(--border-light);
            box-shadow: var(--box-shadow);
            position: relative;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.2s ease;
        }

        .glass-panel:hover {
            border-color: var(--teal);
            transform: translateY(-1px);
        }

        .agent-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .agent-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .agent-grid {
                grid-template-columns: 1fr;
            }
        }

        .agent-card {
            cursor: pointer;
            position: relative;
            overflow: hidden;
            padding-bottom: 20px;
        }

        .agent-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--teal);
            transition: width 0.3s ease;
        }

        .agent-card:hover::after {
            width: 100%;
        }

        .agent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .agent-name {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .agent-emoji {
            font-size: 1.6rem;
        }

        .status-badge {
            font-size: 0.7rem;
            padding: 4px 8px;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .status-live {
            background-color: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.2);
            color: #88ff88;
        }

        .status-partial {
            background-color: rgba(255, 255, 0, 0.1);
            border: 1px solid rgba(255, 255, 0, 0.2);
            color: #ffff88;
        }

        .status-notbuilt {
            background-color: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.2);
            color: #ff8888;
        }

        .agent-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
            font-size: 0.85rem;
        }

        .agent-info-item {
            display: flex;
            justify-content: space-between;
        }

        .system-dots {
            display: flex;
            gap: 5px;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .dot-green {
            background-color: #22cc22;
        }

        .dot-red {
            background-color: #cc2222;
        }

        .agent-output {
            margin-top: 15px;
            font-style: italic;
            font-size: 0.85rem;
            color: var(--muted);
        }

        .section-title {
            margin: 40px 0 20px 0;
            border-bottom: 1px solid var(--border-light);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .build-order {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1024px) {
            .build-order {
                grid-template-columns: 1fr;
            }
        }

        .build-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .build-title {
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-light);
            color: var(--teal);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .build-item {
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            padding: 15px;
            border-radius: 4px;
            font-size: 0.85rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .build-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            background-color: rgba(255, 255, 255, 0.05);
        }

        .build-task {
            font-weight: bold;
            margin-bottom: 8px;
        }

        .build-agent {
            display: inline-block;
            margin-right: 10px;
            color: var(--blue);
        }

        .build-effort {
            display: inline-block;
            color: var(--muted);
        }

        .build-who {
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--danger-red);
        }

        .assets-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.85rem;
        }

        .assets-table th, 
        .assets-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        .assets-table th {
            background-color: rgba(255, 255, 255, 0.03);
            font-weight: bold;
            color: var(--teal);
        }

        .dependency-map {
            margin-top: 40px;
            position: relative;
        }

        .dependency-map svg {
            max-width: 100%;
            height: auto;
        }

        .agent-details {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            width: 80%;
            max-width: 900px;
            max-height: 80vh;
            overflow-y: auto;
            background-color: var(--light-bg);
            border: 1px solid var(--teal);
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .agent-details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-light);
            padding-bottom: 15px;
        }

        .agent-details-name {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .agent-details-name .agent-emoji {
            font-size: 2.5rem;
        }

        .agent-details-name h3 {
            font-size: 1.8rem;
            margin: 0;
        }

        .agent-details-close {
            background: none;
            border: none;
            color: var(--muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .agent-details-close:hover {
            color: var(--dark-text);
        }

        .agent-details-section {
            margin-bottom: 30px;
        }

        .agent-details-section h4 {
            margin-bottom: 15px;
            color: var(--teal);
            font-size: 1.2rem;
        }

        .agent-details table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .agent-details table th,
        .agent-details table td {
            padding: 10px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        .agent-details table th {
            background-color: rgba(255, 255, 255, 0.03);
            font-weight: bold;
            color: var(--blue);
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 99;
        }

        .priority-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 0.75rem;
        }

        .p0 {
            background-color: rgba(255, 0, 0, 0.2);
            color: var(--danger-red);
            border: 1px solid rgba(255, 0, 0, 0.3);
        }

        .p1 {
            background-color: rgba(255, 0, 0, 0.1);
            color: var(--danger-red);
            border: 1px solid rgba(255, 0, 0, 0.2);
        }

        .p2 {
            background-color: rgba(255, 255, 0, 0.1);
            color: #ffff88;
            border: 1px solid rgba(255, 255, 0, 0.2);
        }

        .p3 {
            background-color: rgba(0, 255, 0, 0.1);
            color: #88ff88;
            border: 1px solid rgba(0, 255, 0, 0.2);
        }

        .p4 {
            background-color: rgba(0, 255, 0, 0.05);
            color: #88ff88;
            border: 1px solid rgba(0, 255, 0, 0.1);
        }

        .graph {
            width: 100%;
            height: auto;
            margin-top: 20px;
        }

        .graph-node {
            fill: #ffffff;
            stroke: var(--border-light);
            stroke-width: 1;
        }

        .graph-node:hover {
            stroke: var(--teal);
            stroke-width: 2;
        }

        .graph-edge {
            stroke: var(--muted);
            stroke-width: 1;
        }

        .graph-label {
            fill: var(--dark-text);
            font-family: 'Lato', sans-serif;
            font-size: 12px;
            text-anchor: middle;
        }

        .graph-edge-label {
            fill: var(--muted);
            font-family: 'Lato', sans-serif;
            font-size: 10px;
            text-anchor: middle;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: -20px -20px 24px -20px;
            padding: 12px 20px;
            background: var(--navy);
            color: #fff;
            border-bottom: none;
        }

        .header-title h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .header-subtitle {
            font-size: 0.85rem;
            color: rgba(255,255,255,.8);
        }

        .header-info {
            text-align: right;
            font-size: 0.8rem;
        }

        .header-date {
            color: rgba(255,255,255,.75);
        }

        .header-version {
            color: var(--teal);
            margin-top: 5px;
            font-weight: 700;
        }

        .table-legend {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>
<body>
    <div class="starfield"></div>
    <div class="planet-horizon"></div>

    <header>
        <div class="header-title" style="display:flex;align-items:center;gap:12px;">
            <img src="https://www.truelegacyhomes.com/wp-content/uploads/2022/10/tlhLOGO.png" alt="TLH" style="height:38px;filter:brightness(0) invert(1);opacity:.95;">
            <div>
                <h1 style="margin-bottom:2px;">TLH Agent Orchestra</h1>
                <div class="header-subtitle">Unified Architecture Control Panel ¬∑ <a href="/tlh/agents/obit-process-results.html" style="color:#9ee7e4;text-decoration:underline;">Obit Process + Results</a></div>
            </div>
        </div>
        <div class="header-info">
            <div class="header-date">Updated February 19, 2026</div>
            <div class="header-version">Design: Unified Architecture</div>
        </div>
    </header>

    <div class="glass-panel">
        <h2 class="section-title">Agent Status</h2>
        <div class="agent-grid" id="agentGrid">
            <!-- Agent cards will be generated by JavaScript -->
        </div>
    </div>

    <div class="glass-panel">
        <h2 class="section-title">Build Order</h2>
        <div class="build-order">
            <div class="build-column">
                <div class="build-title">This Week (Feb 17-21)</div>
                <div id="build-this-week">
                    <!-- Build items will be generated by JavaScript -->
                </div>
            </div>
            <div class="build-column">
                <div class="build-title">Next Week (Feb 24-28)</div>
                <div id="build-next-week">
                    <!-- Build items will be generated by JavaScript -->
                </div>
            </div>
            <div class="build-column">
                <div class="build-title">Month 2 (March)</div>
                <div id="build-month-2">
                    <!-- Build items will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <div class="glass-panel">
        <h2 class="section-title">Left Main Assets</h2>
        <div class="table-legend">
            <div class="legend-item">
                <span class="dot dot-green"></span> Available
            </div>
            <div class="legend-item">
                <span class="dot dot-red"></span> Needed
            </div>
        </div>
        <table class="assets-table" id="assetsTable">
            <thead>
                <tr>
                    <th>Asset</th>
                    <th>Records</th>
                    <th>Available To</th>
                </tr>
            </thead>
            <tbody>
                <!-- Table rows will be generated by JavaScript -->
            </tbody>
        </table>
    </div>

    <div class="glass-panel">
        <h2 class="section-title">Dependency Map</h2>
        <div class="dependency-map">
            <svg id="dependencyGraph" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                <!-- SVG content will be generated by JavaScript -->
            </svg>
        </div>
    </div>

    <div class="glass-panel">
        <h2 class="section-title">What We Tackle Next (Systems + Workflows)</h2>
        <p style="font-size:0.9rem;color:var(--muted);margin-bottom:16px;">Execution-first list, prioritized by leverage. Focus is system readiness and workflow activation.</p>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div>
                <h3 style="font-size:1rem;margin-bottom:10px;color:var(--teal);text-transform:uppercase;letter-spacing:.8px;">Phase 1 ‚Äî Do First (Unlocks everything)</h3>
                <ul style="padding-left:18px;font-size:0.88rem;line-height:1.65;">
                    <li><strong>DealSignals + Left Main validation:</strong> confirm active feeds, fields, and usable access.</li>
                    <li><strong>Google Ads OAuth daily pull:</strong> finish auth and turn on automated spend/conversion pulls.</li>
                    <li><strong>Inside-sales answer-rate baseline:</strong> isolate the real phone answer KPI before scaling spend.</li>
                    <li><strong>Stale-lead alert workflow:</strong> auto-flag leads untouched &gt;7 days.</li>
                    <li><strong>Past-client export + Alumni sequence:</strong> launch the $0-CAC referral engine.</li>
                </ul>
            </div>

            <div>
                <h3 style="font-size:1rem;margin-bottom:10px;color:var(--purple);text-transform:uppercase;letter-spacing:.8px;">Phase 2 ‚Äî Workflow Activation</h3>
                <ul style="padding-left:18px;font-size:0.88rem;line-height:1.65;">
                    <li><strong>Probate attorney pipeline workflow:</strong> Top-20 list ‚Üí outreach templates ‚Üí meeting cadence.</li>
                    <li><strong>Two Checks consult workflow:</strong> standardized checklist + capture fields in CRM.</li>
                    <li><strong>Review/listing cadence workflow:</strong> post-sale trigger ‚Üí listing + review ask + follow-up.</li>
                    <li><strong>Weekly command rollup:</strong> fixed report structure (traffic, calls, leads, consults, wins, blockers).</li>
                    <li><strong>Anomaly alert workflow:</strong> spend spikes, call drops, and conversion anomalies to Justin.</li>
                </ul>
            </div>
        </div>

        <div style="margin-top:18px;border-top:1px solid var(--border-light);padding-top:14px;">
            <h3 style="font-size:1rem;margin-bottom:8px;color:var(--navy);text-transform:uppercase;letter-spacing:.8px;">System Targets (Priority Order)</h3>
            <ol style="padding-left:20px;font-size:0.88rem;line-height:1.65;">
                <li><strong>Salesforce + Left Main</strong> (source of truth for lead/deal workflow)</li>
                <li><strong>Google Ads API</strong> (cost + conversion visibility)</li>
                <li><strong>RingCentral + CallRail</strong> (answer-rate + attribution integrity)</li>
                <li><strong>Mailchimp</strong> (shopper + alumni sequence throughput)</li>
                <li><strong>Google Business Profile / Reviews layer</strong> (reputation flywheel)</li>
            </ol>
        </div>
    </div>

    <!-- Agent Detail Modal -->
    <div class="overlay" id="overlay"></div>
    <div class="agent-details" id="agentDetails">
        <!-- Agent details will be generated by JavaScript -->
    </div>

    <script>
        // Agent data
        const agents = [
            {
                emoji: "üî¶",
                name: "BEACON",
                mission: "Find families who need TLH before competitors. Proactive intelligence layer.",
                status: "LIVE",
                model: "M2 ($0.03/run)",
                human: "Justin / Paul review leads",
                systems: [
                    { name: "Web search/fetch", status: true, desc: "Obituary scanning (SD U-T, OC Register, Legacy.com)" },
                    { name: "SF Property_SalesAI__c", status: true, desc: "Cross-ref obituary names ‚Üí 243K deed records for property values" },
                    { name: "SF Property__c", status: true, desc: "229K property addresses for verification" },
                    { name: "leads.json", status: true, desc: "Deduplication store ‚Äî 26 leads tracked" },
                    { name: "SF CLI (token)", status: true, desc: "`sf org display` for fresh Bearer tokens" },
                ],
                gaps: [
                    { name: "DealSignals activation", priority: "P0", effort: "Ask Paul", unlocks: "Real-time probate/foreclosure/eviction signals IN SF ‚Äî replaces obituary scraping" },
                    { name: "Probate court scraper", priority: "P1", effort: "Hard", unlocks: "SD Superior Court direct ‚Äî names + case numbers + attorneys" },
                    { name: "SF Lead auto-push", priority: "P2", effort: "Medium", unlocks: "Beacon writes leads directly to SF Leads (not just JSON)" },
                    { name: "Left Main cadence trigger", priority: "P2", effort: "Medium", unlocks: "Auto-enroll new leads into Left Main follow-up cadences" },
                ],
                output: "26 leads in pipeline (4 Gold, 8 Blue, 14 Gray)",
                outputLines: [
                    "26 leads in pipeline (4 Gold, 8 Blue, 14 Gray)",
                    "Dashboard live: justinhart.biz/tlh/leads/",
                    "Beacon + Scout flow diagram: justinhart.biz/tlh/agents/beacon-scout-flow.html"
                ]
            },
            {
                emoji: "üîç",
                name: "SCOUT",
                mission: "Build referral partner network (attorneys, facilities, fiduciaries). $0 CAC channel.",
                status: "PARTIAL",
                model: "Sonnet (needs reasoning for relationship mapping)",
                human: "Justin / Jamison for outreach",
                systems: [
                    { name: "Web search", status: true, desc: "Attorney/facility research" },
                    { name: "SF API", status: true, desc: "Partner tracking in Accounts" },
                    { name: "Beacon lead feed", status: true, desc: "Receives Gold leads + attorney flags" },
                ],
                gaps: [
                    { name: "Attorney Top 20 list (SD)", priority: "P1", effort: "Easy (web research)", unlocks: "First partner targets ‚Äî probate attorneys in target ZIPs" },
                    { name: "Attorney Top 20 list (OC)", priority: "P2", effort: "Easy", unlocks: "OC expansion" },
                    { name: "Outreach templates", priority: "P2", effort: "Easy", unlocks: "Email/letter templates for attorney pitch" },
                    { name: "Partner collateral", priority: "P2", effort: "Medium", unlocks: "One-pagers: \"We handle the junk, the jewelry, and the keys\"" },
                    { name: "Facility target list", priority: "P3", effort: "Medium", unlocks: "Senior living facilities for referral partnerships" },
                    { name: "SF Campaign tracking", priority: "P3", effort: "Medium", unlocks: "Track which partners ‚Üí which deals" },
                    { name: "CLE presentation deck", priority: "P4", effort: "Medium", unlocks: "Present at attorney continuing ed events" },
                ],
                output: "V2 Brief written (8,400 words)",
                outputLines: [
                    "V2 Brief written (8,400 words): `tlh/scout/SCOUT-V2-BRIEF.md`",
                    "Outreach protocol defined: Day 0-14 monitor ‚Üí Day 21-28 card ‚Üí Day 60+ pitch"
                ]
            },
            {
                emoji: "üíå",
                name: "GRACE",
                mission: "Make Salesforce actually work. Lead scoring, stale detection, cross-sell triggers, flow audit.",
                status: "PARTIAL",
                model: "M2 for routine queries, Sonnet for analysis",
                human: "Jonathan / James use CRM daily",
                systems: [
                    { name: "SF API (SOQL)", status: true, desc: "Full read/write on all objects" },
                    { name: "SF CLI", status: true, desc: "Token management" },
                    { name: "CallRail API", status: true, desc: "Call data for lead enrichment" },
                    { name: "Left Main Cadences", status: true, desc: "Follow-up automation engine" },
                    { name: "Left Main Lead fields", status: true, desc: "Asking price, mortgage, reason for selling, property details" },
                    { name: "Left Main Opp fields", status: true, desc: "ARV, rehab costs, MAO, comps, negotiation notes" },
                    { name: "AI_Score__c", status: true, desc: "500 records scored" },
                ],
                gaps: [
                    { name: "183-flow audit", priority: "P0", effort: "Hard", unlocks: "Must complete before ANY new automations. CRM Code Freeze in effect." },
                    { name: "Cross-sell field", priority: "P2", effort: "Easy (SF admin)", unlocks: "`Estate_Sale_to_Home_Purchase__c` ‚Äî tracks conversion across service lines" },
                    { name: "Stale lead cron", priority: "P2", effort: "Easy", unlocks: "Alert when leads go untouched >7 days" },
                    { name: "Left Main cadence audit", priority: "P2", effort: "Medium", unlocks: "Which of 1,961 cadences are active? Which are TLH-relevant vs investor templates?" },
                    { name: "VIP Partner Routing", priority: "P3", effort: "Medium", unlocks: "Attorney/partner referrals bypass queue ‚Üí direct to Jonathan" },
                    { name: "Two Checks protocol", priority: "P3", effort: "Medium", unlocks: "Auto-populate consultation checklist in SF" },
                ],
                output: "500 leads scored with AI_Score__c",
                outputLines: [
                    "500 leads scored with AI_Score__c",
                    "Lead scoring methodology: `tlh/lead-scoring/METHODOLOGY.md`",
                    "WHO-TO-CALL prioritized list"
                ]
            },
            {
                emoji: "üìù",
                name: "PENNY",
                mission: "SEO content, partner collateral, listing descriptions, video scripts. Feed the funnel.",
                status: "NOT BUILT",
                model: "M2 for drafts, Sonnet for polish",
                human: "Brett for final review",
                systems: [
                    { name: "Workspace (file I/O)", status: true, desc: "Draft content to files" },
                    { name: "Web search", status: true, desc: "Keyword research, competitor analysis" },
                ],
                gaps: [
                    { name: "WordPress API creds", priority: "P1", effort: "Easy (ask Paul)", unlocks: "Direct blog publishing" },
                    { name: "Content calendar", priority: "P2", effort: "Easy", unlocks: "Monthly topics mapped to SEO + seasonality" },
                    { name: "SEO keyword baseline", priority: "P2", effort: "Medium", unlocks: "What TLH ranks for now vs. should rank for" },
                    { name: "Partner one-pagers", priority: "P2", effort: "Easy", unlocks: "\"48-Hour Value Audit\" collateral for Scout" },
                    { name: "Video testimonial scripts", priority: "P3", effort: "Easy", unlocks: "Highest-converting content type" },
                    { name: "Listing description templates", priority: "P3", effort: "Easy", unlocks: "Standardized estate sale / property listings" },
                ],
                output: "None yet ‚Äî needs skill creation",
                outputLines: [
                    "None yet ‚Äî needs skill creation"
                ]
            },
            {
                emoji: "üê¶",
                name: "LARK",
                mission: "Estate sale listings, social media, review management. Brand presence.",
                status: "NOT BUILT",
                model: "M2 for posts, Sonnet for strategy",
                human: "Debbie for scheduling",
                systems: [
                    { name: "Mailchimp API", status: true, desc: "Estate sale shopper emails" },
                    { name: "Web search", status: true, desc: "Review monitoring" },
                ],
                gaps: [
                    { name: "FB/IG credentials", priority: "P2", effort: "Easy (ask Paul)", unlocks: "Social posting for estate sales" },
                    { name: "Google Business Profile API", priority: "P2", effort: "Medium", unlocks: "Review response automation" },
                    { name: "Yelp monitoring", priority: "P3", effort: "Easy", unlocks: "Alert on new reviews" },
                    { name: "Listing templates", priority: "P3", effort: "Easy", unlocks: "Standardized estate sale announcements" },
                    { name: "Photo pipeline", priority: "P4", effort: "Hard", unlocks: "Auto-process estate sale photos" },
                ],
                output: "Review request emails built",
                outputLines: [
                    "Review request emails: `skills/tlh-review-request/SKILL.md` (built)",
                    "Mailchimp connected"
                ]
            },
            {
                emoji: "üìä",
                name: "LEDGER",
                mission: "Single source of truth for TLH marketing ROI. Kill waste, find winners.",
                status: "PARTIAL",
                model: "M2 for data pulls, Opus for deep analysis",
                human: "Justin reviews dashboards",
                systems: [
                    { name: "Google Ads API", status: true, desc: "Ad spend, CPC, conversions, campaign data" },
                    { name: "CallRail API", status: true, desc: "Call volume, sources, answer rates" },
                    { name: "SF API", status: true, desc: "Pipeline, closed deals, revenue" },
                    { name: "Microsoft Clarity", status: true, desc: "Heatmaps, session recordings, funnel drops" },
                    { name: "RingCentral API", status: true, desc: "Phone answer rates (needs inside-sales filter)" },
                    { name: "Left Main Metrics", status: true, desc: "Daily processing metrics from Property Sales AI" },
                    { name: "Left Main Transactions", status: false, desc: "Should have more ‚Äî may not be used" },
                ],
                gaps: [
                    { name: "Google Ads OAuth + daily pull", priority: "P1", effort: "Medium", unlocks: "Real-time waste detection ‚Äî 14 dead campaigns burning $6.5K/mo" },
                    { name: "Inside sales answer rate baseline", priority: "P1", effort: "Easy (filter rc-report.js)", unlocks: "Validates \"leaky bucket\" ‚Äî can't scale marketing until phone is fixed" },
                    { name: "ROI dashboard", priority: "P2", effort: "Medium", unlocks: "THE deliverable ‚Äî ad spend ‚Üí calls ‚Üí leads ‚Üí deals ‚Üí revenue" },
                    { name: "Anomaly alerts cron", priority: "P2", effort: "Easy", unlocks: "Ping Justin when CPC spikes, calls drop, or spend anomaly" },
                    { name: "Attribution model", priority: "P3", effort: "Hard", unlocks: "Which campaigns ‚Üí which closed deals (CallRail ‚Üí SF ‚Üí close)" },
                    { name: "Left Main Transaction audit", priority: "P3", effort: "Easy", unlocks: "Why only 3 transactions? Should reflect all deal financials" },
                ],
                output: "RingCentral reports and API connections ready",
                outputLines: [
                    "RingCentral reports: `skills/tlh-analyst/rc-report.js`",
                    "CallRail connected: `TOOLS.md`",
                    "Google Ads API approved: Account 140-771-1741"
                ]
            },
            {
                emoji: "üéº",
                name: "MAESTRO",
                mission: "Morning briefings, agent coordination, escalation routing, weekly rollups.",
                status: "PARTIAL",
                model: "Sonnet (needs judgment for prioritization)",
                human: "Justin receives briefings",
                systems: [
                    { name: "All agent outputs", status: false, desc: "Reads Beacon leads, needs other agent feeds" },
                    { name: "Cron system", status: true, desc: "Morning brief at 6:30 AM, insights at 6:05 AM" },
                    { name: "Telegram", status: true, desc: "Delivers briefings to Justin" },
                ],
                gaps: [
                    { name: "Agent output feeds", priority: "P2", effort: "Medium", unlocks: "Structured outputs from Grace, Ledger, Scout ‚Üí Maestro reads" },
                    { name: "Escalation routing", priority: "P2", effort: "Medium", unlocks: "Decision tree: what goes to Justin vs Paul vs Jonathan" },
                    { name: "Weekly rollup format", priority: "P3", effort: "Easy", unlocks: "Standardized \"state of TLH\" report" },
                    { name: "Left Main Subscription alerts", priority: "P3", effort: "Easy", unlocks: "Alert when new county data drops (1,440 SD records on Feb 15)" },
                ],
                output: "TLH Morning Brief running daily",
                outputLines: [
                    "TLH Morning Brief: cron 6:30 AM weekdays",
                    "TLH Morning Insights: cron 6:05 AM daily"
                ]
            },
            {
                emoji: "üì¨",
                name: "PIPER",
                mission: "Estate sale buyer emails + past client referral pipeline. The $0 CAC machine.",
                status: "PARTIAL",
                model: "M2 for emails",
                human: "Fully automated (Justin approves campaigns)",
                systems: [
                    { name: "Mailchimp API", status: true, desc: "Shopper email lists + campaigns" },
                    { name: "SF API", status: true, desc: "Past client data for Alumni Engine" },
                    { name: "Left Main Email Cadences", status: true, desc: "Could power Alumni drip" },
                ],
                gaps: [
                    { name: "SF past client export", priority: "P1", effort: "Easy (SOQL query)", unlocks: "1,500+ past clients ‚Üí Alumni Engine list" },
                    { name: "Alumni referral template", priority: "P2", effort: "Easy", unlocks: "Soft-ask: \"Know anyone going through a transition?\"" },
                    { name: "Referral tracking field", priority: "P2", effort: "Easy (SF admin)", unlocks: "\"Past Client Referral\" lead source" },
                    { name: "Left Main cadence integration", priority: "P3", effort: "Medium", unlocks: "Enroll alumni in Left Main follow-up cadence (automated)" },
                    { name: "Seasonal re-engagement", priority: "P3", effort: "Easy", unlocks: "Holiday cards, check-ins, anniversary emails" },
                ],
                output: "Shopper email templates exist",
                outputLines: [
                    "Shopper email templates exist",
                    "Mailchimp connected: `TOOLS.md`"
                ]
            },
        ];

        // Build order data
        const buildOrder = {
            "this-week": [
                { task: "Ask Paul: Left Main tier + DealSignals", agent: "Beacon", effort: "5 min", who: "Justin ‚Üí Paul" },
                { task: "Attorney Top 20 list (SD)", agent: "Scout", effort: "2 hrs", who: "Railstote (web research)" },
                { task: "SF past client export", agent: "Piper", effort: "30 min", who: "Railstote (SOQL)" },
                { task: "Inside sales answer rate filter", agent: "Ledger", effort: "1 hr", who: "Railstote (update rc-report.js)" },
                { task: "Google Ads OAuth setup", agent: "Ledger", effort: "2 hrs", who: "Railstote (Python client lib)" },
            ],
            "next-week": [
                { task: "Stale lead alert cron", agent: "Grace", effort: "1 hr", who: "Railstote" },
                { task: "Alumni referral template", agent: "Piper", effort: "1 hr", who: "Railstote + Justin review" },
                { task: "Penny skill creation", agent: "Penny", effort: "2 hrs", who: "Railstote" },
                { task: "Content calendar (Q1)", agent: "Penny", effort: "2 hrs", who: "Railstote" },
                { task: "Left Main cadence audit", agent: "Grace", effort: "3 hrs", who: "Railstote" },
            ],
            "month-2": [
                { task: "183-flow audit", agent: "Grace", effort: "8+ hrs", who: "Railstote + Paul" },
                { task: "Probate court scraper", agent: "Beacon", effort: "8 hrs", who: "Railstote" },
                { task: "ROI dashboard", agent: "Ledger", effort: "4 hrs", who: "Railstote" },
                { task: "FB/IG + GBP setup", agent: "Lark", effort: "2 hrs", who: "Justin ‚Üí Paul for creds" },
                { task: "Attribution model", agent: "Ledger", effort: "8 hrs", who: "Railstote" },
            ],
        };

        // Asset data
        const assets = [
            { name: "Property deed transfers", records: "242,950", availableTo: "Beacon, Grace, Ledger" },
            { name: "Property addresses", records: "228,717", availableTo: "Beacon, Grace" },
            { name: "Follow-up cadences", records: "1,961", availableTo: "Grace, Piper" },
            { name: "Scheduled emails", records: "20,809", availableTo: "Grace, Piper" },
            { name: "Scheduled SMS", records: "3,572", availableTo: "Grace" },
            { name: "SMS templates", records: "120", availableTo: "Grace, Piper" },
            { name: "Email drip templates", records: "73", availableTo: "Grace, Piper" },
            { name: "County data subscriptions", records: "12 (SD, OC, LA + 9 CO)", availableTo: "Beacon, Ledger" },
            { name: "Weekly data pulls", records: "1,400-4,000/county/week", availableTo: "Beacon" },
            { name: "Property-to-Opp matches", records: "32", availableTo: "Grace, Ledger" },
            { name: "Processing metrics", records: "242 daily records", availableTo: "Ledger" },
        ];

        // Generate agent cards
        function generateAgentCards() {
            const agentGrid = document.getElementById('agentGrid');
            agentGrid.innerHTML = '';

            agents.forEach((agent, index) => {
                const systemsConnected = agent.systems.filter(s => s.status).length;
                const systemsTotal = agent.systems.length;
                const gapsTotal = agent.gaps.length;

                const card = document.createElement('div');
                card.className = 'agent-card glass-panel';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="agent-header">
                        <div class="agent-name">
                            <span class="agent-emoji">${agent.emoji}</span>
                            ${agent.name}
                        </div>
                        <div class="status-badge status-${agent.status.toLowerCase().replace(' ', '')}">
                            ${agent.status === 'LIVE' ? '‚úÖ' : agent.status === 'PARTIAL' ? '‚ö†Ô∏è' : '‚ùå'} ${agent.status}
                        </div>
                    </div>
                    <div class="agent-info">
                        <div class="agent-info-item">
                            <span>Model:</span>
                            <span>${agent.model}</span>
                        </div>
                        <div class="agent-info-item">
                            <span>Human:</span>
                            <span>${agent.human}</span>
                        </div>
                        <div class="agent-info-item">
                            <span>Systems:</span>
                            <div class="system-dots">
                                ${Array(systemsConnected).fill().map(() => `<span class="dot dot-green"></span>`).join('')}
                                ${Array(systemsTotal - systemsConnected).fill().map(() => `<span class="dot dot-red"></span>`).join('')}
                            </div>
                        </div>
                        <div class="agent-info-item">
                            <span>Gaps:</span>
                            <span>${gapsTotal}</span>
                        </div>
                    </div>
                    <div class="agent-output">${agent.output}</div>
                `;

                card.addEventListener('click', () => showAgentDetails(index));
                agentGrid.appendChild(card);
            });
        }

        // Generate build order
        function generateBuildOrder() {
            const thisWeek = document.getElementById('build-this-week');
            const nextWeek = document.getElementById('build-next-week');
            const month2 = document.getElementById('build-month-2');

            buildOrder['this-week'].forEach(item => {
                const buildItem = document.createElement('div');
                buildItem.className = 'build-item';
                buildItem.innerHTML = `
                    <div class="build-task">${item.task}</div>
                    <div>
                        <span class="build-agent">${item.agent}</span>
                        <span class="build-effort">${item.effort}</span>
                    </div>
                    <div class="build-who">${item.who}</div>
                `;
                thisWeek.appendChild(buildItem);
            });

            buildOrder['next-week'].forEach(item => {
                const buildItem = document.createElement('div');
                buildItem.className = 'build-item';
                buildItem.innerHTML = `
                    <div class="build-task">${item.task}</div>
                    <div>
                        <span class="build-agent">${item.agent}</span>
                        <span class="build-effort">${item.effort}</span>
                    </div>
                    <div class="build-who">${item.who}</div>
                `;
                nextWeek.appendChild(buildItem);
            });

            buildOrder['month-2'].forEach(item => {
                const buildItem = document.createElement('div');
                buildItem.className = 'build-item';
                buildItem.innerHTML = `
                    <div class="build-task">${item.task}</div>
                    <div>
                        <span class="build-agent">${item.agent}</span>
                        <span class="build-effort">${item.effort}</span>
                    </div>
                    <div class="build-who">${item.who}</div>
                `;
                month2.appendChild(buildItem);
            });
        }

        // Generate assets table
        function generateAssetsTable() {
            const tableBody = document.querySelector('#assetsTable tbody');
            tableBody.innerHTML = '';

            assets.forEach(asset => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${asset.name}</td>
                    <td>${asset.records}</td>
                    <td>${asset.availableTo}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Generate dependency graph
        function generateDependencyGraph() {
            const svg = document.getElementById('dependencyGraph');
            
            // Node positions
            const nodePositions = {
                "BEACON": { x: 150, y: 100 },
                "SCOUT": { x: 150, y: 250 },
                "GRACE": { x: 400, y: 100 },
                "MAESTRO": { x: 650, y: 200 },
                "PENNY": { x: 150, y: 400 },
                "LARK": { x: 400, y: 350 },
                "PIPER": { x: 650, y: 350 },
                "LEDGER": { x: 400, y: 450 },
                "JUSTIN": { x: 800, y: 200 },
                "PUBLIC": { x: 550, y: 350 },
                "PAST_CLIENTS": { x: 780, y: 350 }
            };

            // Edges
            const edges = [
                { from: "BEACON", to: "GRACE", label: "finds leads" },
                { from: "BEACON", to: "SCOUT", label: "flags attorneys" },
                { from: "SCOUT", to: "MAESTRO", label: "builds partners" },
                { from: "GRACE", to: "MAESTRO", label: "stale alerts" },
                { from: "MAESTRO", to: "JUSTIN", label: "briefs" },
                { from: "SCOUT", to: "PENNY", label: "needs collateral" },
                { from: "PENNY", to: "LARK", label: "content" },
                { from: "LARK", to: "PUBLIC", label: "posts/lists" },
                { from: "LARK", to: "PIPER", label: "shopper lists" },
                { from: "PIPER", to: "PAST_CLIENTS", label: "alumni" },
                { from: "PAST_CLIENTS", to: "GRACE", label: "referrals" },
                { from: "LEDGER", to: "MAESTRO", label: "monitors" }
            ];

            // Draw nodes
            for (const [name, pos] of Object.entries(nodePositions)) {
                const isAgent = agents.some(agent => agent.name === name);
                
                if (isAgent) {
                    const agent = agents.find(a => a.name === name);
                    
                    // Draw node
                    const node = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    node.setAttribute("cx", pos.x);
                    node.setAttribute("cy", pos.y);
                    node.setAttribute("r", 40);
                    node.setAttribute("class", "graph-node");
                    node.setAttribute("id", `node-${name}`);
                    svg.appendChild(node);
                    
                    // Draw emoji
                    const emoji = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    emoji.setAttribute("x", pos.x);
                    emoji.setAttribute("y", pos.y);
                    emoji.setAttribute("dy", "5");
                    emoji.setAttribute("text-anchor", "middle");
                    emoji.setAttribute("font-size", "20");
                    emoji.textContent = agent.emoji;
                    svg.appendChild(emoji);
                    
                    // Draw name
                    const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    label.setAttribute("x", pos.x);
                    label.setAttribute("y", pos.y + 55);
                    label.setAttribute("class", "graph-label");
                    label.textContent = name;
                    svg.appendChild(label);
                } else {
                    // Draw external node
                    const node = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    node.setAttribute("x", pos.x - 40);
                    node.setAttribute("y", pos.y - 20);
                    node.setAttribute("width", 80);
                    node.setAttribute("height", 40);
                    node.setAttribute("rx", 5);
                    node.setAttribute("class", "graph-node");
                    node.setAttribute("id", `node-${name}`);
                    svg.appendChild(node);
                    
                    // Draw name
                    const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    label.setAttribute("x", pos.x);
                    label.setAttribute("y", pos.y + 5);
                    label.setAttribute("class", "graph-label");
                    label.textContent = name.replace('_', ' ');
                    svg.appendChild(label);
                }
            }

            // Draw edges
            edges.forEach(edge => {
                const fromPos = nodePositions[edge.from];
                const toPos = nodePositions[edge.to];
                
                // Calculate line
                const isFromAgent = agents.some(agent => agent.name === edge.from);
                const isToAgent = agents.some(agent => agent.name === edge.to);
                
                let startX, startY, endX, endY;
                
                if (isFromAgent) {
                    // Calculate position on the circle edge
                    const angle = Math.atan2(toPos.y - fromPos.y, toPos.x - fromPos.x);
                    startX = fromPos.x + 40 * Math.cos(angle);
                    startY = fromPos.y + 40 * Math.sin(angle);
                } else {
                    startX = fromPos.x;
                    startY = fromPos.y + 20; // Bottom of rectangle
                }
                
                if (isToAgent) {
                    // Calculate position on the circle edge
                    const angle = Math.atan2(fromPos.y - toPos.y, fromPos.x - toPos.x);
                    endX = toPos.x + 40 * Math.cos(angle);
                    endY = toPos.y + 40 * Math.sin(angle);
                } else {
                    endX = toPos.x;
                    endY = toPos.y - 20; // Top of rectangle
                }
                
                // Draw line
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", startX);
                line.setAttribute("y1", startY);
                line.setAttribute("x2", endX);
                line.setAttribute("y2", endY);
                line.setAttribute("class", "graph-edge");
                line.setAttribute("marker-end", "url(#arrowhead)");
                svg.appendChild(line);
                
                // Draw edge label
                const midX = (startX + endX) / 2;
                const midY = (startY + endY) / 2;
                
                const edgeLabel = document.createElementNS("http://www.w3.org/2000/svg", "text");
                edgeLabel.setAttribute("x", midX);
                edgeLabel.setAttribute("y", midY);
                edgeLabel.setAttribute("dy", "-5");
                edgeLabel.setAttribute("class", "graph-edge-label");
                
                // Add background for better readability
                const edgeLabelBg = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                edgeLabelBg.setAttribute("class", "graph-label-bg");
                edgeLabel.textContent = edge.label;
                
                // Adjust background size to fit text
                const bbox = edgeLabel.getBBox ? edgeLabel.getBBox() : { width: edge.label.length * 6, height: 12 };
                edgeLabelBg.setAttribute("x", midX - bbox.width / 2 - 2);
                edgeLabelBg.setAttribute("y", midY - bbox.height / 2 - 10);
                edgeLabelBg.setAttribute("width", bbox.width + 4);
                edgeLabelBg.setAttribute("height", bbox.height);
                edgeLabelBg.setAttribute("fill", "var(--light-bg)");
                
                svg.appendChild(edgeLabelBg);
                svg.appendChild(edgeLabel);
            });

            // Add arrowhead marker definition
            const defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
            svg.appendChild(defs);
            
            const marker = document.createElementNS("http://www.w3.org/2000/svg", "marker");
            marker.setAttribute("id", "arrowhead");
            marker.setAttribute("viewBox", "0 0 10 10");
            marker.setAttribute("refX", "5");
            marker.setAttribute("refY", "5");
            marker.setAttribute("markerWidth", "6");
            marker.setAttribute("markerHeight", "6");
            marker.setAttribute("orient", "auto");
            defs.appendChild(marker);
            
            const arrow = document.createElementNS("http://www.w3.org/2000/svg", "path");
            arrow.setAttribute("d", "M 0 0 L 10 5 L 0 10 z");
            arrow.setAttribute("fill", "var(--muted)");
            marker.appendChild(arrow);
        }

        // Show agent details modal
        function showAgentDetails(index) {
            const agent = agents[index];
            const detailsContainer = document.getElementById('agentDetails');
            const overlay = document.getElementById('overlay');
            
            // Build HTML for agent details
            let detailsHTML = `
                <div class="agent-details-header">
                    <div class="agent-details-name">
                        <span class="agent-emoji">${agent.emoji}</span>
                        <h3>${agent.name}</h3>
                    </div>
                    <button class="agent-details-close" id="closeAgentDetails">&times;</button>
                </div>
                
                <div class="agent-details-section">
                    <h4>Mission</h4>
                    <p>${agent.mission}</p>
                </div>

                <div class="agent-details-section">
                    <h4>Status</h4>
                    <div class="status-badge status-${agent.status.toLowerCase().replace(' ', '')}" style="display: inline-flex; margin-bottom: 10px;">
                        ${agent.status === 'LIVE' ? '‚úÖ' : agent.status === 'PARTIAL' ? '‚ö†Ô∏è' : '‚ùå'} ${agent.status}
                    </div>
                    <p>Model: ${agent.model}</p>
                    <p>Human: ${agent.human}</p>
                </div>

                <div class="agent-details-section">
                    <h4>Systems Access</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>System</th>
                                <th>Status</th>
                                <th>What It Does</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            agent.systems.forEach(system => {
                detailsHTML += `
                    <tr>
                        <td>${system.name}</td>
                        <td>${system.status ? '‚úÖ Available' : '‚ùå Needed'}</td>
                        <td>${system.desc}</td>
                    </tr>
                `;
            });
            
            detailsHTML += `
                        </tbody>
                    </table>
                </div>

                <div class="agent-details-section">
                    <h4>Gaps to Close</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Gap</th>
                                <th>Priority</th>
                                <th>Effort</th>
                                <th>What It Unlocks</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            agent.gaps.forEach(gap => {
                const priorityClass = gap.priority.includes('P0') ? 'p0' : 
                                     gap.priority.includes('P1') ? 'p1' : 
                                     gap.priority.includes('P2') ? 'p2' : 
                                     gap.priority.includes('P3') ? 'p3' : 'p4';
                
                detailsHTML += `
                    <tr>
                        <td>${gap.name}</td>
                        <td><span class="priority-badge ${priorityClass}">${gap.priority}</span></td>
                        <td>${gap.effort}</td>
                        <td>${gap.unlocks}</td>
                    </tr>
                `;
            });
            
            detailsHTML += `
                        </tbody>
                    </table>
                </div>

                <div class="agent-details-section">
                    <h4>Current Output</h4>
                    <ul>
            `;
            
            agent.outputLines.forEach(line => {
                detailsHTML += `<li>${line}</li>`;
            });
            
            detailsHTML += `
                    </ul>
                </div>
            `;
            
            detailsContainer.innerHTML = detailsHTML;
            
            // Show modal
            detailsContainer.style.display = 'block';
            overlay.style.display = 'block';
            
            // Add close event
            document.getElementById('closeAgentDetails').addEventListener('click', hideAgentDetails);
            overlay.addEventListener('click', hideAgentDetails);
        }

        // Hide agent details modal
        function hideAgentDetails() {
            document.getElementById('agentDetails').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Initialize dashboard
        function initDashboard() {
            generateAgentCards();
            generateBuildOrder();
            generateAssetsTable();
            generateDependencyGraph();
        }

        // Run initialization when DOM is loaded
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>