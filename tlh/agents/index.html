<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TLH AI Marketing Team ‚Äî Live Dashboard</title>
  <meta http-equiv="refresh" content="30">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --bg-tertiary: #21262d;
      --border: #30363d;
      --text-primary: #e6edf3;
      --text-secondary: #8b949e;
      --accent-blue: #58a6ff;
      --accent-green: #3fb950;
      --accent-yellow: #d29922;
      --accent-purple: #a855f7;
      --accent-red: #f85149;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 30px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    h1 {
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .live-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      color: var(--accent-green);
    }
    
    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--accent-green);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 0;
    }
    
    .tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      font-size: 0.95rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
      margin-bottom: -1px;
    }
    
    .tab:hover {
      color: var(--text-primary);
    }
    
    .tab.active {
      color: var(--accent-blue);
      border-bottom-color: var(--accent-blue);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .stats-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--accent-blue);
    }
    
    .stat-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-top: 5px;
    }
    
    /* Scout Stats Bar */
    .scout-stats-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .scout-stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    
    .scout-stat-value {
      font-size: 2rem;
      font-weight: 700;
    }
    
    .scout-stat-value.high { color: var(--accent-red); }
    .scout-stat-value.medium { color: var(--accent-yellow); }
    .scout-stat-value.low { color: var(--accent-green); }
    .scout-stat-value.total { color: var(--accent-purple); }
    
    .scout-stat-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-top: 5px;
    }
    
    .last-updated {
      font-size: 0.8rem;
      color: var(--text-secondary);
      text-align: right;
      margin-bottom: 20px;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      margin-bottom: 40px;
    }
    
    .section {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }
    
    .section-title {
      font-size: 1.1rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-primary);
    }
    
    /* Agent Cards */
    .agents-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .agent-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .agent-card:hover {
      border-color: var(--accent-blue);
      transform: translateY(-2px);
    }
    
    .agent-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .agent-avatar {
      width: 50px;
      height: 50px;
      background: var(--bg-tertiary);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .agent-info h3 {
      font-size: 1.1rem;
      margin-bottom: 3px;
    }
    
    .agent-role {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .agent-status {
      position: absolute;
      top: 15px;
      right: 15px;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .status-idle {
      background: rgba(139, 148, 158, 0.2);
      color: var(--text-secondary);
    }
    
    .status-working {
      background: rgba(63, 185, 80, 0.2);
      color: var(--accent-green);
      animation: pulse 1.5s infinite;
    }
    
    .status-waiting {
      background: rgba(210, 153, 34, 0.2);
      color: var(--accent-yellow);
    }
    
    .agent-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--border);
    }
    
    .agent-stat {
      text-align: center;
    }
    
    .agent-stat-value {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--accent-blue);
    }
    
    .agent-stat-label {
      font-size: 0.7rem;
      color: var(--text-secondary);
    }
    
    /* Activity Feed */
    .activity-feed {
      max-height: 400px;
      overflow-y: auto;
    }
    
    .activity-item {
      display: flex;
      gap: 15px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .activity-item:last-child {
      border-bottom: none;
    }
    
    .activity-icon {
      width: 36px;
      height: 36px;
      background: var(--bg-tertiary);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-title {
      font-size: 0.9rem;
      margin-bottom: 3px;
    }
    
    .activity-meta {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    
    /* Queue */
    .queue-item {
      background: var(--bg-tertiary);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .queue-task {
      font-size: 0.9rem;
    }
    
    .queue-priority {
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .priority-high {
      background: rgba(248, 81, 73, 0.2);
      color: var(--accent-red);
    }
    
    .priority-medium {
      background: rgba(210, 153, 34, 0.2);
      color: var(--accent-yellow);
    }
    
    .priority-low {
      background: rgba(63, 185, 80, 0.2);
      color: var(--accent-green);
    }
    
    /* Handoff Visualization */
    .handoff-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      padding: 30px;
      background: var(--bg-tertiary);
      border-radius: 8px;
    }
    
    .flow-node {
      text-align: center;
    }
    
    .flow-icon {
      width: 60px;
      height: 60px;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 8px;
    }
    
    .flow-icon.active {
      border-color: var(--accent-green);
      box-shadow: 0 0 20px rgba(63, 185, 80, 0.3);
    }
    
    .flow-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    
    .flow-arrow {
      font-size: 1.5rem;
      color: var(--border);
    }
    
    .flow-arrow.active {
      color: var(--accent-green);
    }
    
    /* Scout Table */
    .scout-table-container {
      overflow-x: auto;
    }
    
    .scout-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    
    .scout-table th {
      background: var(--bg-tertiary);
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      white-space: nowrap;
      transition: color 0.2s ease;
    }
    
    .scout-table th:hover {
      color: var(--text-primary);
    }
    
    .scout-table th.sorted-asc::after {
      content: ' ‚ñ≤';
      font-size: 0.7rem;
    }
    
    .scout-table th.sorted-desc::after {
      content: ' ‚ñº';
      font-size: 0.7rem;
    }
    
    .scout-table td {
      padding: 12px 15px;
      border-bottom: 1px solid var(--border);
      vertical-align: top;
    }
    
    .scout-table tr:hover {
      background: var(--bg-tertiary);
    }
    
    .priority-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .priority-badge.high {
      background: rgba(248, 81, 73, 0.2);
      color: var(--accent-red);
    }
    
    .priority-badge.medium {
      background: rgba(210, 153, 34, 0.2);
      color: var(--accent-yellow);
    }
    
    .priority-badge.low {
      background: rgba(63, 185, 80, 0.2);
      color: var(--accent-green);
    }
    
    .priority-badge.none {
      background: rgba(139, 148, 158, 0.2);
      color: var(--text-secondary);
    }
    
    .military-icon {
      color: var(--accent-yellow);
    }
    
    .empty-state {
      text-align: center;
      padding: 40px;
      color: var(--text-secondary);
    }
    
    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 15px;
      opacity: 0.5;
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      color: var(--text-secondary);
      font-size: 0.85rem;
    }
    
    .refresh-note {
      font-size: 0.75rem;
      color: var(--text-secondary);
      opacity: 0.7;
    }

    @media (max-width: 900px) {
      .agents-grid { grid-template-columns: 1fr; }
      .grid-2 { grid-template-columns: 1fr; }
      .stats-bar { grid-template-columns: repeat(2, 1fr); }
      .scout-stats-bar { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üè† TLH AI Marketing Team</h1>
      <div class="live-badge">
        <span class="live-dot"></span>
        Live Dashboard
      </div>
    </header>
    
    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="overview">üìä Overview</button>
      <button class="tab" data-tab="scout">üîç Scout Leads</button>
    </div>
    
    <!-- Overview Tab -->
    <div class="tab-content active" id="overview">
      <!-- Stats Bar -->
      <div class="stats-bar">
        <div class="stat-card">
          <div class="stat-value" id="stat-content">0</div>
          <div class="stat-label">Content Created</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-reviews">0</div>
          <div class="stat-label">SEO Reviews</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-sequences">0</div>
          <div class="stat-label">Nurture Sequences</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-handoffs">0</div>
          <div class="stat-label">Handoffs Today</div>
        </div>
      </div>
      
      <!-- Agent Cards -->
      <div class="agents-grid">
        <!-- Penny - Content Writer -->
        <div class="agent-card">
          <span class="agent-status status-idle">Idle</span>
          <div class="agent-header">
            <div class="agent-avatar">üìù</div>
            <div class="agent-info">
              <h3>Penny</h3>
              <div class="agent-role">Content Writer</div>
            </div>
          </div>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
            City landing pages, blog posts, educational content
          </p>
          <div class="agent-stats">
            <div class="agent-stat">
              <div class="agent-stat-value">0</div>
              <div class="agent-stat-label">Pages Today</div>
            </div>
            <div class="agent-stat">
              <div class="agent-stat-value">0</div>
              <div class="agent-stat-label">In Queue</div>
            </div>
          </div>
        </div>
        
        <!-- Scout - SEO Analyst -->
        <div class="agent-card">
          <span class="agent-status status-idle">Idle</span>
          <div class="agent-header">
            <div class="agent-avatar">üîç</div>
            <div class="agent-info">
              <h3>Scout</h3>
              <div class="agent-role">SEO Analyst</div>
            </div>
          </div>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
            Content scoring, keyword optimization, local SEO
          </p>
          <div class="agent-stats">
            <div class="agent-stat">
              <div class="agent-stat-value">0</div>
              <div class="agent-stat-label">Reviews Today</div>
            </div>
            <div class="agent-stat">
              <div class="agent-stat-value">‚Äî</div>
              <div class="agent-stat-label">Avg Score</div>
            </div>
          </div>
        </div>
        
        <!-- Grace - Lead Nurture -->
        <div class="agent-card">
          <span class="agent-status status-idle">Idle</span>
          <div class="agent-header">
            <div class="agent-avatar">üíå</div>
            <div class="agent-info">
              <h3>Grace</h3>
              <div class="agent-role">Lead Nurture</div>
            </div>
          </div>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
            Email sequences, follow-up cadences, CRM integration
          </p>
          <div class="agent-stats">
            <div class="agent-stat">
              <div class="agent-stat-value">0</div>
              <div class="agent-stat-label">Sequences</div>
            </div>
            <div class="agent-stat">
              <div class="agent-stat-value">0</div>
              <div class="agent-stat-label">Emails Draft</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Handoff Flow -->
      <div class="section" style="margin-bottom: 40px;">
        <h2 class="section-title">üîÑ Workflow Pipeline</h2>
        <div class="handoff-flow">
          <div class="flow-node">
            <div class="flow-icon">üìã</div>
            <div class="flow-label">Task Queue</div>
          </div>
          <div class="flow-arrow">‚Üí</div>
          <div class="flow-node">
            <div class="flow-icon">üìù</div>
            <div class="flow-label">Penny</div>
          </div>
          <div class="flow-arrow">‚Üí</div>
          <div class="flow-node">
            <div class="flow-icon">üîç</div>
            <div class="flow-label">Scout</div>
          </div>
          <div class="flow-arrow">‚Üí</div>
          <div class="flow-node">
            <div class="flow-icon">üíå</div>
            <div class="flow-label">Grace</div>
          </div>
          <div class="flow-arrow">‚Üí</div>
          <div class="flow-node">
            <div class="flow-icon">‚úÖ</div>
            <div class="flow-label">Published</div>
          </div>
        </div>
      </div>
      
      <!-- Activity + Queue Grid -->
      <div class="grid-2">
        <!-- Activity Feed -->
        <div class="section">
          <h2 class="section-title">üì° Activity Feed</h2>
          <div class="activity-feed">
            <div class="activity-item">
              <div class="activity-icon">ü¶â</div>
              <div class="activity-content">
                <div class="activity-title">System initialized</div>
                <div class="activity-meta">Orchestrator ‚Ä¢ Just now</div>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon">üöÄ</div>
              <div class="activity-content">
                <div class="activity-title">TLH AI Marketing Team v1.0 online</div>
                <div class="activity-meta">System ‚Ä¢ Feb 8, 2026 9:30 PM</div>
              </div>
            </div>
            <div class="empty-state" style="padding: 20px;">
              <div style="opacity: 0.5;">Waiting for first task...</div>
            </div>
          </div>
        </div>
        
        <!-- Task Queue -->
        <div class="section">
          <h2 class="section-title">üìã Task Queue</h2>
          <div class="empty-state">
            <div class="empty-state-icon">üì≠</div>
            <p>No tasks in queue</p>
            <p style="font-size: 0.8rem; margin-top: 10px;">Add tasks to get the team working</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Scout Leads Tab -->
    <div class="tab-content" id="scout">
      <div class="scout-stats-bar">
        <div class="scout-stat-card">
          <div class="scout-stat-value total" id="scout-total">0</div>
          <div class="scout-stat-label">Total Leads</div>
        </div>
        <div class="scout-stat-card">
          <div class="scout-stat-value high" id="scout-high">0</div>
          <div class="scout-stat-label">HIGH Priority</div>
        </div>
        <div class="scout-stat-card">
          <div class="scout-stat-value medium" id="scout-medium">0</div>
          <div class="scout-stat-label">MEDIUM Priority</div>
        </div>
        <div class="scout-stat-card">
          <div class="scout-stat-value low" id="scout-low">0</div>
          <div class="scout-stat-label">LOW Priority</div>
        </div>
      </div>
      
      <div class="last-updated" id="scout-last-updated">
        Last updated: Loading...
      </div>
      
      <div class="section">
        <h2 class="section-title">üîç Scout Obituary Leads</h2>
        <div class="scout-table-container">
          <table class="scout-table" id="scout-table">
            <thead>
              <tr>
                <th data-sort="name">Name</th>
                <th data-sort="age">Age</th>
                <th data-sort="location">Location</th>
                <th data-sort="dateOfDeath">Date of Death</th>
                <th data-sort="survivedBy">Survivors</th>
                <th data-sort="priority">Priority</th>
                <th data-sort="military">Military</th>
                <th data-sort="source">Source</th>
              </tr>
            </thead>
            <tbody id="scout-table-body">
              <tr>
                <td colspan="8" style="text-align: center; padding: 40px;">
                  Loading leads data...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <footer>
      <p>Built by <strong>Railstote</strong> ü¶â ‚Ä¢ True Legacy Homes</p>
      <p class="refresh-note">Auto-refreshes every 30 seconds</p>
    </footer>
  </div>
  
  <script>
    // Scout Leads Data
    const scoutLeads = [
      {"name": "Daniel Levon Dudas", "age": 91, "dateOfDeath": "2026-01-28", "location": "La Jolla, CA", "survivedBy": "Wife: Margaret; children: Daniel B., Christian, Tiffany Brown, Julianna, Alexandra Zinda; 3 grandchildren", "address": "La Jolla home (50+ years)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "military": "Navy fighter pilot, F-4 Phantoms, Miramar test pilot", "career": "Aerospace exec (McDonnell, General Dynamics, Raytheon, Lockheed Skunk Works)", "priority": "HIGH"},
      {"name": "Dr. Robert Matthew Thomas Jr.", "age": 86, "dateOfDeath": "2025-12-23", "location": "La Jolla, CA", "survivedBy": "Family members (ophthalmologist, 50+ years SD practice)", "address": "La Jolla residence", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "military": "Navy Lt. Commander, Medical Corps", "career": "Ophthalmologist, co-founded San Diego Eye Institute", "priority": "HIGH"},
      {"name": "Dona C. Whitaker", "age": 85, "dateOfDeath": "2025-11-11", "location": "La Jolla, CA", "survivedBy": "Husband Dan, son, daughter", "address": "Home in La Jolla (decades-long resident)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "military": "Husband was Air Force officer", "career": "American Airlines stewardess, SD Padres team plane", "priority": "HIGH"},
      {"name": "Clifton Cooke Jr.", "age": 78, "dateOfDeath": "2026-01-26", "location": "Rancho Santa Fe, CA", "survivedBy": "Wife: Janet (56 years married); daughters: Denise Pryor (SD), Lisa Wray (Australia); 5 grandchildren", "address": "Home in Rancho Santa Fe", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "career": "Tech CEO (Advanced Digital Systems, VisiCom, SYS, Wavestream)", "priority": "HIGH"},
      {"name": "Richard McElroy", "age": "65+", "dateOfDeath": "2026-02-15", "location": "Coronado, CA", "survivedBy": "Wife: Janice Howard; daughters: Kristina and Michelle", "address": "Coronado (residence to be determined)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "HIGH"},
      {"name": "Constance Mullin Branscomb", "age": "80+", "dateOfDeath": "2026-02-15", "location": "La Jolla, San Diego", "survivedBy": "3 children: Stephen J. Mullin, Keith A. Mullin, Laura Mullin Thompson; 5 grandchildren", "address": "La Jolla residence (property likely)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "notes": "Former scientist, founded Classical Performing Artists Management. Husband Michael died 2000, remarried 2005. High-value La Jolla property possible.", "priority": "HIGH"},
      {"name": "Terry Vaughn Caldwell", "age": 78, "dateOfDeath": "2026-01-29", "location": "Ramona, CA", "survivedBy": "Daughter Toni Ann, other family", "address": "Home in Ramona", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "military": "US Air Force (Vietnam era), George AFB", "career": "DEA forensic chemist (36 years)", "priority": "MEDIUM"},
      {"name": "Marian Curtis", "age": 93, "dateOfDeath": "2026-01-21", "location": "Vista, CA", "survivedBy": "Children, grandchildren", "address": "Vista residence", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "MEDIUM"},
      {"name": "Angelina Vitale", "age": 93, "dateOfDeath": "2026-02-10", "location": "San Diego (Little Italy area)", "survivedBy": "Son: Mario Carmelo Vitale; Grandchildren: Angela Porco, Mario Vitale Jr.", "address": "San Diego (Little Italy area)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "MEDIUM"},
      {"name": "Vera A. Plain", "age": 102, "dateOfDeath": "2026-02-08", "location": "Point Loma, San Diego", "survivedBy": "Longtime Point Loma resident; died at home with caregivers", "address": "Point Loma (address to be determined)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "MEDIUM"},
      {"name": "David Michael Mulvaney", "age": 67, "dateOfDeath": "2026-02-03", "location": "Pacific Beach, San Diego", "survivedBy": "Son: Seamus Mulvaney; Daughter: Morgan Mulvaney; mother: Mary Ruth Mulvaney", "address": "Family home on San Aquario Drive in Pacific Beach - still in family", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "MEDIUM"},
      {"name": "Gary Albert Cooprider", "age": "unknown", "dateOfDeath": "2026-02-15", "location": "La Jolla, San Diego", "survivedBy": "Met wife on blind date in Montana", "address": "La Jolla residence", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "MEDIUM"},
      {"name": "Annette Wilkins Larsen", "age": 67, "dateOfDeath": "2026-02-15", "location": "San Diego, CA", "survivedBy": "Family details limited", "address": "San Diego (address to be determined)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "LOW"},
      {"name": "Brian E. Wages", "age": "unknown", "dateOfDeath": "2026-02-15", "location": "Chula Vista, CA", "survivedBy": "Colonel USAF (ret), died from coronary artery disease", "address": "Chula Vista residence", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "notes": "Military retiree - potential survivor outreach for home sale", "priority": "LOW"},
      {"name": "Helen Cuseo", "age": "unknown", "dateOfDeath": "2026-02-14", "location": "San Diego, CA", "survivedBy": "Daughter of Italian immigrants, married Joseph Cuseo", "address": "San Diego (address to be determined)", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "LOW"},
      {"name": "Barry Crane", "age": "unknown", "dateOfDeath": "2026-02-08", "location": "San Diego, CA", "survivedBy": "Family", "address": "San Diego", "source": "San Diego Union-Tribune", "dateAdded": "2026-02-16", "priority": "LOW"}
    ];
    
    const lastUpdated = "2026-02-16";
    
    // Priority sort order
    const priorityOrder = { 'HIGH': 1, 'MEDIUM': 2, 'LOW': 3 };
    
    // Sort leads by priority (HIGH first), then by date
    function sortLeads(leads, field = 'priority', direction = 'asc') {
      return [...leads].sort((a, b) => {
        if (field === 'priority') {
          const aOrder = priorityOrder[a.priority] || 4;
          const bOrder = priorityOrder[b.priority] || 4;
          return direction === 'asc' ? aOrder - bOrder : bOrder - aOrder;
        }
        if (field === 'dateOfDeath') {
          const aDate = new Date(a.dateOfDeath || '1970-01-01');
          const bDate = new Date(b.dateOfDeath || '1970-01-01');
          return direction === 'asc' ? bDate - aDate : aDate - bDate; // newest first default
        }
        if (field === 'name' || field === 'location' || field === 'source') {
          const aVal = (a[field] || '').toLowerCase();
          const bVal = (b[field] || '').toLowerCase();
          return direction === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
        }
        if (field === 'age') {
          const aAge = typeof a.age === 'number' ? a.age : 999;
          const bAge = typeof b.age === 'number' ? b.age : 999;
          return direction === 'asc' ? aAge - bAge : bAge - aAge;
        }
        if (field === 'military') {
          const aHas = a.military ? 1 : 0;
          const bHas = b.military ? 1 : 0;
          return direction === 'asc' ? bHas - aHas : aHas - bHas;
        }
        return 0;
      });
    }
    
    // Render the table
    function renderScoutTable(leads) {
      const tbody = document.getElementById('scout-table-body');
      
      if (!leads || leads.length === 0) {
        tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 40px;">No leads found</td></tr>';
        return;
      }
      
      tbody.innerHTML = leads.map(lead => {
        const priorityClass = lead.priority ? lead.priority.toLowerCase() : 'none';
        const priorityLabel = lead.priority || '‚Äî';
        const militaryDisplay = lead.military 
          ? '<span class="military-icon">üéñÔ∏è</span> ' + lead.military 
          : '‚Äî';
        
        return `
          <tr>
            <td><strong>${lead.name}</strong></td>
            <td>${lead.age || '‚Äî'}</td>
            <td>${lead.location || '‚Äî'}</td>
            <td>${lead.dateOfDeath || '‚Äî'}</td>
            <td style="max-width: 250px; font-size: 0.8rem;">${lead.survivedBy || '‚Äî'}</td>
            <td><span class="priority-badge ${priorityClass}">${priorityLabel}</span></td>
            <td style="font-size: 0.8rem;">${militaryDisplay}</td>
            <td>${lead.source || '‚Äî'}</td>
          </tr>
        `;
      }).join('');
    }
    
    // Update stats
    function updateScoutStats(leads) {
      const total = leads.length;
      const high = leads.filter(l => l.priority === 'HIGH').length;
      const medium = leads.filter(l => l.priority === 'MEDIUM').length;
      const low = leads.filter(l => l.priority === 'LOW').length;
      
      document.getElementById('scout-total').textContent = total;
      document.getElementById('scout-high').textContent = high;
      document.getElementById('scout-medium').textContent = medium;
      document.getElementById('scout-low').textContent = low;
      
      // Format last updated
      const date = new Date(lastUpdated);
      document.getElementById('scout-last-updated').textContent = 
        'Last updated: ' + date.toLocaleDateString('en-US', { 
          year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' 
        });
    }
    
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });
    
    // Table sorting
    let currentSort = { field: 'priority', direction: 'asc' };
    
    document.querySelectorAll('.scout-table th[data-sort]').forEach(th => {
      th.addEventListener('click', () => {
        const field = th.dataset.sort;
        
        if (currentSort.field === field) {
          currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
        } else {
          currentSort.field = field;
          currentSort.direction = 'asc';
        }
        
        // Update header classes
        document.querySelectorAll('.scout-table th').forEach(h => {
          h.classList.remove('sorted-asc', 'sorted-desc');
        });
        th.classList.add(currentSort.direction === 'asc' ? 'sorted-asc' : 'sorted-desc');
        
        const sorted = sortLeads(scoutLeads, currentSort.field, currentSort.direction);
        renderScoutTable(sorted);
      });
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      // Sort by priority (HIGH first) by default
      const sorted = sortLeads(scoutLeads, 'priority', 'asc');
      renderScoutTable(sorted);
      updateScoutStats(scoutLeads);
    });
  </script>
</body>
</html>
