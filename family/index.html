<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hart Family Legacy Tree</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --card-border: rgba(148, 163, 184, 0.2);
            --line-color: rgba(148, 163, 184, 0.3);
            --gold: #fbbf24;
            --gold-glow: rgba(251, 191, 36, 0.3);
            --accent: #38bdf8;
            --text: #f8fafc;
            --text-muted: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top center, #1e293b 0%, #0f172a 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem;
            /* Allow scrolling for wide tree */
            overflow: auto; 
        }

        .header {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            background: linear-gradient(to right, #f59e0b, #fcd34d, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px var(--gold-glow);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-muted);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Tree Logic - CSS Based */
        .tree {
            display: table; 
            margin: 0 auto;
        }
        
        .tree ul {
            padding-top: 20px; 
            position: relative;
            transition: all 0.5s;
            display: flex;
            justify-content: center;
        }
        
        .tree li {
            float: left; text-align: center;
            list-style-type: none;
            position: relative;
            padding: 20px 5px 0 5px;
            transition: all 0.5s;
        }
        
        /* We will use the vertical lines from ::before and ::after */
        .tree li::before, .tree li::after{
            content: '';
            position: absolute; top: 0; right: 50%;
            border-top: 2px solid var(--line-color);
            width: 50%; height: 20px;
        }
        .tree li::after{
            right: auto; left: 50%;
            border-left: 2px solid var(--line-color);
        }
        
        /* Remove connectors from single child */
        .tree li:only-child::after, .tree li:only-child::before {
            display: none;
        }
        .tree li:only-child{ padding-top: 0;}
        
        /* Remove space from the top of single children */
        .tree li:first-child::before, .tree li:last-child::after{
            border: 0 none;
        }
        
        /* Adding back the vertical connector to the last nodes */
        .tree li:last-child::before{
            border-right: 2px solid var(--line-color);
            border-radius: 0 5px 0 0;
        }
        .tree li:first-child::after{
            border-radius: 5px 0 0 0;
        }
        
        /* Time to add downward connectors from parents */
        .tree ul ul::before{
            content: '';
            position: absolute; top: 0; left: 50%;
            border-left: 2px solid var(--line-color);
            width: 0; height: 20px;
        }
        
        .tree li a {
            text-decoration: none;
            display: inline-block;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1rem;
            width: 260px;
            text-align: left;
            position: relative;
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--gold);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 0 20px var(--gold-glow);
            z-index: 20;
        }

        .card.root {
            width: 320px;
            background: linear-gradient(145deg, rgba(251, 191, 36, 0.1), rgba(30, 41, 59, 0.8));
            border-color: rgba(251, 191, 36, 0.4);
            margin-bottom: 10px;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .avatar {
            font-size: 1.8rem;
            background: rgba(255, 255, 255, 0.05);
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        .info h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 2px;
        }

        .info .role {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .meta {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .meta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .bday-pill {
            background: rgba(255,255,255,0.05);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
        }
        
        .next-bday {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s;
        }
        
        .card:hover .next-bday { opacity: 1; transform: scale(1); }
        .next-bday.soon { opacity: 1; transform: scale(1); animation: bounce 2s infinite; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

        /* Compact card for kids */
        .card.kid {
            width: 180px;
            padding: 0.75rem;
        }
        
        .card.kid .avatar { width: 32px; height: 32px; font-size: 1.2rem; }
        .card.kid h3 { font-size: 0.9rem; }
        
        /* Adjust spacing for dense branches */
        .tree li { padding: 20px 4px 0 4px; }

    </style>
</head>
<body>
    <div class="header">
        <h1>The Hart Family</h1>
        <div class="subtitle">Four Generations of Legacy</div>
        <div id="stats-bar" style="margin-top: 1rem; color: var(--accent); font-size: 0.9rem;"></div>
    </div>

    <div class="tree" id="family-tree"></div>

    <script>
        // ==================== DATA ====================
        const today = new Date();
        
        // Helper: Calculate age
        function getAge(dateStr) {
            const birth = new Date(dateStr);
            let age = today.getFullYear() - birth.getFullYear();
            const m = today.getMonth() - birth.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) age--;
            return age;
        }

        function getDaysUntil(dateStr) {
            const birth = new Date(dateStr);
            const thisYear = today.getFullYear();
            let next = new Date(thisYear, birth.getMonth(), birth.getDate());
            if (next < today) next = new Date(thisYear + 1, birth.getMonth(), birth.getDate());
            return Math.ceil((next - today) / (1000 * 60 * 60 * 24));
        }

        function formatDate(dateStr) {
            const d = new Date(dateStr);
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }
        
        // Corrected Sean's Birthday: Jan 6, 2014
        const treeData = {
            name: "Tom & Cheryln",
            role: "Patriarch & Matriarch",
            emoji: "üë¥üëµ",
            birthdays: [
                { name: "Tom", date: "1945-12-05" },
                { name: "Cheryln", date: "1946-02-25" }
            ],
            anniversary: "1969-01-31",
            type: "root",
            children: [
                {
                    name: "Justin & Jenny",
                    role: "Eldest Son",
                    emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
                    birthdays: [
                        { name: "Justin", date: "1972-10-20" },
                        { name: "Jenny", date: "1983-01-07" }
                    ],
                    type: "couple",
                    children: [
                        {
                            name: "Kestra & Andrew",
                            role: "Daughter",
                            emoji: "üë©‚Äç‚ù§Ô∏è‚Äçüë®",
                            birthdays: [
                                { name: "Kestra", date: "1994-12-02" },
                                { name: "Andrew", date: "1990-10-12" }
                            ],
                            anniversary: "2016-09-09",
                            type: "couple",
                            children: [
                                { name: "Malina", emoji: "üëß", date: "2017-09-17", type: "kid" },
                                { name: "Alan", emoji: "üë¶", date: "2018-10-30", type: "kid" },
                                { name: "Ivan", emoji: "üë¶", date: "2023-01-13", type: "kid" },
                                { name: "Wilson", emoji: "üë∂", date: "2024-11-02", type: "kid" }
                            ]
                        },
                        { name: "McKaeln", emoji: "üë®", date: "1997-07-13", type: "kid" },
                        { name: "Kaden", emoji: "üéÆ", date: "2003-03-04", type: "kid" },
                        { name: "Hannah E.", emoji: "üë©", date: "2003-09-26", type: "kid" },
                        { name: "Gia (Dia)", emoji: "üöó", date: "2008-03-24", type: "kid" },
                        { name: "Arya", emoji: "üìö", date: "2017-04-24", type: "kid" },
                        { name: "Trinity", emoji: "üåü", date: "2018-12-07", type: "kid" },
                        { name: "Harley", emoji: "üé®", date: "2021-08-19", type: "kid" },
                        { name: "Ellis (Ella)", emoji: "üë∂", date: "2023-12-20", type: "kid" }
                    ]
                },
                {
                    name: "Daria & Jeremy",
                    role: "Daughter",
                    emoji: "üë©‚Äç‚ù§Ô∏è‚Äçüë®",
                    birthdays: [
                        { name: "Daria", date: "1974-06-24" },
                        { name: "Jeremy", date: "1976-03-16" }
                    ],
                    anniversary: "2000-12-28",
                    type: "couple",
                    children: [
                        { name: "Hannah", emoji: "üëß", date: "2001-04-02", type: "kid" },
                        { name: "Leah", emoji: "üëß", date: "2004-04-28", type: "kid" },
                        { name: "Nicolas", emoji: "üë¶", date: "2005-02-20", type: "kid" },
                        { name: "Elisabeth", emoji: "üëß", date: "2007-08-12", type: "kid" }
                    ]
                },
                {
                    name: "Chris & Suzanne",
                    role: "Brother",
                    emoji: "üë®‚Äç‚ù§Ô∏è‚Äçüë©",
                    birthdays: [
                        { name: "Chris", date: "1978-05-24" },
                        { name: "Suzanne", date: "1980-02-02" }
                    ],
                    anniversary: "2003-08-08",
                    type: "couple",
                    children: [
                        { name: "Emma", emoji: "üëß", date: "2006-05-19", type: "kid" },
                        { name: "Joslyn", emoji: "üëß", date: "2008-12-01", type: "kid" },
                        { name: "Layla", emoji: "üëß", date: "2010-03-29", type: "kid" },
                        { name: "Holland", emoji: "üëß", date: "2012-09-18", type: "kid" }
                    ]
                },
                {
                    name: "Lauren & Andy",
                    role: "Daughter",
                    emoji: "üë©‚Äç‚ù§Ô∏è‚Äçüë®",
                    birthdays: [
                        { name: "Lauren", date: "1981-02-03" },
                        { name: "Andy", date: "1981-11-30" }
                    ],
                    anniversary: "2007-08-11",
                    type: "couple",
                    children: [
                        { name: "Chad", emoji: "üë¶", date: "2009-07-25", type: "kid" },
                        { name: "Sean", emoji: "üë¶", date: "2014-01-06", type: "kid" },
                        { name: "Tyler", emoji: "üë¶", date: "2014-12-02", type: "kid" }
                    ]
                }
            ]
        };

        // ==================== RENDERER ====================
        
        function renderCardContent(node) {
            let html = `<div class="card-header"><div class="avatar">${node.emoji}</div>`;
            html += `<div class="info"><h3>${node.name}</h3>`;
            if (node.role) html += `<div class="role">${node.role}</div>`;
            html += `</div></div>`;
            
            // Meta
            html += `<div class="meta">`;
            
            let people = node.birthdays;
            if (!people && node.date) {
                people = [{ name: node.name.split(' ')[0], date: node.date }];
            } else if (!people) {
                 people = [];
            }
            
            let minDays = 999;
            
            people.forEach(p => {
                const days = getDaysUntil(p.date);
                const age = getAge(p.date);
                if (days < minDays) minDays = days;
                
                html += `<div class="meta-row">
                    <span>${p.name}</span>
                    <span class="bday-pill">${age} (${formatDate(p.date)})</span>
                </div>`;
            });
            
            if (node.anniversary) {
                const annDays = getDaysUntil(node.anniversary);
                const years = getAge(node.anniversary);
                html += `<div class="meta-row" style="color:var(--accent); margin-top:4px; padding-top:4px; border-top:1px dashed rgba(255,255,255,0.1)">
                    <span>üíç Married</span>
                    <span class="bday-pill">${years} yrs</span>
                </div>`;
                if (annDays < minDays) minDays = annDays;
            }
            
            html += `</div>`;
            
            // Badge
            if (minDays < 60) {
                const label = minDays === 0 ? "TODAY!" : `${minDays} days`;
                html += `<div class="next-bday ${minDays < 30 ? 'soon' : ''}">üéâ ${label}</div>`;
            }
            
            return html;
        }

        function renderTree(node) {
            let html = `<li>`;
            html += `<a href="#">`;
            html += `<div class="card ${node.type}">`;
            html += renderCardContent(node);
            html += `</div></a>`;
            
            if (node.children && node.children.length > 0) {
                html += `<ul>`;
                node.children.forEach(child => {
                    html += renderTree(child);
                });
                html += `</ul>`;
            }
            
            html += `</li>`;
            return html;
        }

        const treeContainer = document.getElementById('family-tree');
        treeContainer.innerHTML = `<ul>${renderTree(treeData)}</ul>`;
        
        // Count stats
        function countNodes(node) {
            let count = (node.birthdays && node.birthdays.length > 0) ? node.birthdays.length : 1;
            if (node.children) {
                node.children.forEach(c => count += countNodes(c));
            }
            return count;
        }
        
        const totalPeople = countNodes(treeData);
        document.getElementById('stats-bar').innerHTML = `
            ${totalPeople} Family Members ¬∑ 4 Generations ¬∑ One Legacy
        `;

    </script>
</body>
</html>
