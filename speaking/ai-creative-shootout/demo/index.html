<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Creative Shootout | DonorBureau</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
@import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;600;700&family=Open+Sans:wght@400;500;600&display=swap');
:root{
  /* DonorBureau Brand Colors */
  --db-navy:#0E3358;
  --db-navy-light:#1a4a7a;
  --db-navy-dark:#091f38;
  --db-gold:#F2AA1F;
  --db-gold-light:#f5be50;
  --db-gold-dark:#d99510;
  --db-white:#FFFFFF;
  --db-light-gray:#EEEFF0;
  --db-dark-gray:#30353B;
  /* Semantic */
  --bg:#EEEFF0;
  --surface:#FFFFFF;
  --border:rgba(14,51,88,0.15);
  --text:#333;
  --text-muted:#666;
  --accent-green:#10b981;
  --accent-red:#ef4444;
  --accent-blue:#3b82f6;
}
body{background:var(--bg);color:var(--text);font-family:'Open Sans',sans-serif;min-height:100vh;overflow-x:hidden}
.container{max-width:1200px;margin:0 auto;padding:20px}

/* Header */
header{text-align:center;padding:30px 20px 20px;background:var(--db-navy);border-radius:12px;margin-bottom:20px}
.db-logo{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:12px}
.db-logo-icon{width:40px;height:40px;background:var(--db-gold);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;font-weight:bold;color:var(--db-navy)}
.db-logo-text{font-size:1rem;font-weight:600;color:var(--db-gold);letter-spacing:.5px}
header h1{font-family:'Lato',sans-serif;font-size:2rem;font-weight:700;color:var(--db-white);margin-bottom:6px}
header h1 span{color:var(--db-gold)}
header p{color:rgba(255,255,255,0.8);font-size:.95em}

/* Input area */
.input-area{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px;margin:20px 0;display:flex;gap:12px;align-items:center;flex-wrap:wrap;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
.input-area textarea{flex:1;min-width:200px;background:var(--db-light-gray);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:12px;font-family:'Open Sans',sans-serif;font-size:.9em;resize:none;height:60px}
.input-area textarea:focus{outline:none;border-color:var(--db-gold)}
.btn{padding:12px 24px;border:none;border-radius:8px;font-weight:600;font-size:.95em;cursor:pointer;transition:all .2s;font-family:'Open Sans',sans-serif}
.btn-primary{background:var(--db-gold);color:var(--db-navy)}
.btn-primary:hover{background:var(--db-gold-light);transform:translateY(-2px);box-shadow:0 4px 12px rgba(242,170,31,0.3)}
.btn-secondary{background:var(--surface);border:2px solid var(--db-navy);color:var(--db-navy)}
.btn-secondary:hover{background:var(--db-navy);color:var(--db-white)}
.btn-reset{background:var(--db-light-gray);border:2px solid var(--text-muted);color:var(--text-muted);font-size:.85em;padding:8px 16px}
.btn-reset:hover{border-color:var(--db-navy);color:var(--db-navy)}
.mode-toggle{display:flex;gap:8px;justify-content:center;margin:16px 0}

/* Chat columns */
.chat-view{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-top:16px}
.column{background:var(--surface);border-radius:12px;border:1px solid var(--border);overflow:hidden;min-height:400px;display:flex;flex-direction:column;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
.column-header{padding:14px 16px;font-family:'Lato',sans-serif;font-weight:700;font-size:.95em;display:flex;align-items:center;gap:8px;border-bottom:1px solid var(--border);background:var(--db-light-gray)}
.col-patriot .column-header{border-top:4px solid var(--db-navy);color:var(--db-navy)}
.col-skeptic .column-header{border-top:4px solid var(--db-gold);color:var(--db-gold-dark)}
.col-urgency .column-header{border-top:4px solid var(--accent-red);color:var(--accent-red)}
.column-body{padding:12px;flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:10px}
.msg{padding:10px 14px;border-radius:10px;font-size:.88em;line-height:1.5;background:var(--db-light-gray);opacity:0;transform:translateY(8px);transition:all .3s}
.msg.visible{opacity:1;transform:translateY(0)}
.msg .label{font-weight:700;font-size:.75em;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.col-patriot .msg .label{color:var(--db-navy)}
.col-skeptic .msg .label{color:var(--db-gold-dark)}
.col-urgency .msg .label{color:var(--accent-red)}
.typing-cursor{display:inline-block;width:2px;height:1em;background:currentColor;animation:blink .6s infinite;vertical-align:text-bottom;margin-left:2px}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* Winner bar */
.winner-bar{display:none;margin-top:20px;background:rgba(16,185,129,0.08);border:2px solid var(--accent-green);border-radius:12px;padding:20px;text-align:center}
.winner-bar h3{color:var(--accent-green);font-family:'Lato',sans-serif;font-size:1.1em;margin-bottom:8px}
.winner-bar .final-copy{font-family:'Open Sans',sans-serif;font-size:.95em;line-height:1.6;color:var(--text);background:var(--db-light-gray);padding:16px;border-radius:8px;margin-top:10px;text-align:left}
.winner-bar.visible{display:block;animation:fadeUp .5s}

/* Comic view */
.comic-view{display:none;margin-top:16px}
.comic-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.comic-panel{background:var(--surface);border:3px solid var(--border);border-radius:12px;padding:0;overflow:hidden;min-height:220px;position:relative;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
.panel-number{position:absolute;top:8px;left:10px;background:var(--db-navy);color:var(--db-white);border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.8em;z-index:2}
.panel-scene{padding:50px 20px 20px;display:flex;flex-direction:column;align-items:center;gap:12px;text-align:center}
.panel-character{font-size:3em}
.speech-bubble{background:var(--db-navy);color:var(--db-white);padding:12px 16px;border-radius:16px;position:relative;font-size:.85em;line-height:1.4;font-weight:600;max-width:90%}
.speech-bubble::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);border:10px solid transparent;border-top-color:var(--db-navy)}
.panel-1{border-color:var(--db-navy)}
.panel-2{border-color:var(--db-gold)}
.panel-3{border-color:var(--accent-red)}
.panel-4{border-color:var(--accent-green)}
.panel-caption{color:var(--text-muted);font-size:.75em;font-style:italic;margin-top:4px}

/* Progress */
.progress{height:4px;background:var(--db-light-gray);border-radius:2px;margin:12px 0;overflow:hidden}
.progress-bar{height:100%;width:0;background:linear-gradient(90deg,var(--db-navy),var(--db-gold));transition:width .3s;border-radius:2px}

@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

/* Speed toggle */
.speed-toggle{position:fixed;top:12px;right:16px;background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:8px 16px;font-size:.85em;cursor:pointer;z-index:100;color:var(--text);user-select:none;transition:all .2s;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.speed-toggle:hover{border-color:var(--db-gold)}
.speed-toggle.fast{border-color:var(--db-gold);color:var(--db-gold-dark);background:rgba(242,170,31,0.1)}

/* Footer */
.footer{text-align:center;padding:24px;color:var(--text-muted);font-size:.85em;margin-top:30px}
.footer-brand{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:8px}
.footer-logo{width:24px;height:24px;background:var(--db-gold);border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:bold;color:var(--db-navy);font-size:.7rem}
.footer-text{color:var(--db-navy);font-weight:600}

@media(max-width:768px){
  .chat-view{grid-template-columns:1fr}
  .comic-grid{grid-template-columns:1fr}
  header h1{font-size:1.5rem}
}
</style>
<script src="live-mode.js"></script>
</head>
<body>
<div class="speed-toggle" id="speedToggle" onclick="toggleSpeed()">üê¢ Presentation</div>
<div class="container">
  <header>
    <div class="db-logo">
      <div class="db-logo-icon">DB</div>
      <div class="db-logo-text">DONORBUREAU</div>
    </div>
    <h1>‚ö° AI Creative <span>Shootout</span></h1>
    <p>Three AI archetypes battle-test your fundraising copy in real time</p>
  </header>

  <div class="input-area">
    <textarea id="userDraft" placeholder="Paste your draft copy here...">"The radical left is destroying America! Send $5 now!"</textarea>
    <button class="btn btn-primary" id="runBtn" onclick="runShootout()">üöÄ Run Shootout</button>
    <a href="chat.html" class="btn btn-secondary" style="text-decoration:none">üì± Phone View</a>
    <a href="comic.html" class="btn btn-secondary" style="text-decoration:none">üé® Comic Strip</a>
    <button class="btn btn-reset" id="resetBtn" onclick="resetAll()" style="display:none">‚Ü∫ Reset</button>
  </div>

  <div class="progress" id="progressWrap" style="display:none"><div class="progress-bar" id="progressBar"></div></div>

  <div class="mode-toggle" id="modeToggle" style="display:none">
    <button class="btn btn-secondary" onclick="showChat()" id="chatBtn">üí¨ Chat Mode</button>
    <button class="btn btn-secondary" onclick="showComic()" id="comicBtn">üé® Comic Mode</button>
  </div>

  <!-- CHAT VIEW -->
  <div class="chat-view" id="chatView">
    <div class="column col-patriot">
      <div class="column-header">ü¶Ö The Patriot<span style="font-weight:400;color:var(--text-muted);font-size:.8em;margin-left:auto">Dignity ¬∑ Honor ¬∑ Greatness</span></div>
      <div class="column-body" id="patriotChat"></div>
    </div>
    <div class="column col-skeptic">
      <div class="column-header">üîç The Skeptic<span style="font-weight:400;color:var(--text-muted);font-size:.8em;margin-left:auto">Proof ¬∑ Clarity ¬∑ Trust</span></div>
      <div class="column-body" id="skepticChat"></div>
    </div>
    <div class="column col-urgency">
      <div class="column-header">üî• The Urgency<span style="font-weight:400;color:var(--text-muted);font-size:.8em;margin-left:auto">Action ¬∑ Deadlines ¬∑ CAPS</span></div>
      <div class="column-body" id="urgencyChat"></div>
    </div>
  </div>

  <!-- WINNER -->
  <div class="winner-bar" id="winnerBar">
    <h3>‚úÖ CONSENSUS REACHED ‚Äî Final Rewrite</h3>
    <div class="final-copy" id="finalCopy"></div>
  </div>

  <!-- COMIC VIEW -->
  <div class="comic-view" id="comicView">
    <div class="comic-grid">
      <div class="comic-panel panel-1">
        <div class="panel-number">1</div>
        <div class="panel-scene">
          <div class="panel-character">ü¶Ö</div>
          <div class="speech-bubble">"Where is the PROMISE? We need morning in America, not midnight!"</div>
          <div class="panel-caption">The Patriot reads the draft and clutches his flag</div>
        </div>
      </div>
      <div class="comic-panel panel-2">
        <div class="panel-number">2</div>
        <div class="panel-scene">
          <div class="panel-character">üîç</div>
          <div class="speech-bubble" style="background:var(--db-gold);color:var(--db-navy)">"'Destroying'? Citation needed. This reads like a chain email from 2008."</div>
          <div class="panel-caption">The Skeptic adjusts her glasses disapprovingly</div>
        </div>
      </div>
      <div class="comic-panel panel-3">
        <div class="panel-number">3</div>
        <div class="panel-scene">
          <div class="panel-character">üî•</div>
          <div class="speech-bubble" style="background:var(--accent-red)">"WHY IS NOTHING IN CAPS?! And where's the DEADLINE?! Add a 3X MATCH or I WALK!"</div>
          <div class="panel-caption">The Urgency flips the table</div>
        </div>
      </div>
      <div class="comic-panel panel-4">
        <div class="panel-number">4</div>
        <div class="panel-scene">
          <div class="panel-character">ü§ù</div>
          <div class="speech-bubble" style="background:var(--accent-green)">"America's promise is worth fighting for. Your $5 becomes $15 ‚Äî but only by midnight."</div>
          <div class="panel-caption">They shake hands. The copy is reborn.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">
    <div class="footer-brand">
      <div class="footer-logo">DB</div>
      <div class="footer-text">DONORBUREAU</div>
    </div>
    AI Creative Shootout Demo ‚Äî DonorBureau Tools
  </div>
</div>

<script>
const SCRIPT = [
  // Turn 1 ‚Äî Initial reactions
  {
    turn: 1,
    patriot: "Hold on. \"Destroying America\"? That's fear, not inspiration. Where is the PROMISE of greatness? I want to see a shining city on a hill, not a dumpster fire. This copy makes me want to hide, not donate.",
    skeptic: "\"The radical left is destroying America\" ‚Äî which part, specifically? The economy? Schools? This is vague fear-mongering. And \"Send $5 now\" ‚Äî why $5? Why not $10? Why not explain what the $5 DOES? I smell a scam.",
    urgency: "WEAK. This is SO WEAK. Where's the DEADLINE?! Where's the MATCH?! \"Send $5 now\" ‚Äî NOW isn't urgent enough! I need a COUNTDOWN TIMER, a 3X MATCH, and an EXPIRATION or nobody clicks ANYTHING!"
  },
  // Turn 2 ‚Äî User pushes back
  {
    turn: 2,
    patriot: "Look, I get it ‚Äî you want emotion. But POSITIVE emotion converts better. \"Protect the American Dream\" hits harder than \"they're destroying everything.\" Give people something to fight FOR.",
    skeptic: "I ran the numbers on 400 fundraising emails. Specific claims outperform vague ones by 3.2x. \"Radical left\" is a buzzword ‚Äî replace it with a specific policy or vote. Also, social proof: \"Join 47,000 patriots\" crushes \"Send $5.\"",
    urgency: "OK here's what I need. THREE things: (1) A deadline ‚Äî \"midnight tonight.\" (2) A match ‚Äî \"3X MATCH.\" (3) A consequence ‚Äî \"or this expires forever.\" That's the formula. THAT'S how you get clicks!"
  },
  // Turn 3 ‚Äî They start riffing
  {
    turn: 3,
    patriot: "What about this angle: \"America's greatest chapter hasn't been written yet ‚Äî and YOU hold the pen.\" That's aspirational. That's Kennedy energy. People donate to HOPE, not despair.",
    skeptic: "I actually... don't hate that, Patriot. But ground it. \"America's greatest chapter\" is still abstract. Tie it to a specific win: a bill, a candidate, a target number. \"We're $12,000 away from flipping District 7\" ‚Äî THAT I can believe.",
    urgency: "FINE. Keep your poetry. But add: \"Your $5 becomes $15 with tonight's 3X match ‚Äî but this expires at MIDNIGHT.\" See? Hope + specifics + deadline. NOW we're cooking! üî•"
  },
  // Turn 4 ‚Äî Tension peaks
  {
    turn: 4,
    patriot: "I love it but \"expires\" sounds like a coupon. We're not selling yogurt. How about: \"This moment won't wait.\" More gravitas. More weight.",
    skeptic: "\"This moment won't wait\" is vague again. What moment? I'm pulling you back to Earth, Patriot. Also ‚Äî has anyone considered a P.S. line? P.S. lines get 79% more reads than body copy. Put the match offer there.",
    urgency: "YOU KNOW WHAT, SKEPTIC IS RIGHT ABOUT THE P.S. ‚Äî I hate admitting it but the data doesn't lie. The P.S. is prime real estate. Put the countdown there. \"P.S. Your 3X match expires at midnight. Don't leave $10 on the table.\""
  },
  // Turn 5 ‚Äî Coming together
  {
    turn: 5,
    patriot: "I'm getting goosebumps. What if the subject line is: \"The chapter that changes everything\"? Opens with hope, creates curiosity. Then we deliver the goods inside.",
    skeptic: "Test it against \"Your $5 = $15 tonight only\" as subject line B. Curiosity vs. specificity ‚Äî let the data decide. But for the BODY copy, I think we're converging. I can live with this direction.",
    urgency: "We're CLOSE. Let me draft the final. I'll keep Patriot's hope, Skeptic's proof, and MY deadline. Give me 10 seconds... üî•üî•üî•"
  },
  // Turn 6 ‚Äî The Winner
  {
    turn: 6,
    patriot: "‚úÖ That's it. That's the one. Dignity, specifics, and urgency ‚Äî all in harmony. I'm proud of us.",
    skeptic: "‚úÖ Surprisingly... I approve. Every claim is grounded. The ask is clear. The P.S. is strong. Well done, team.",
    urgency: "‚úÖ FINALLY! SHIP IT! SHIP IT NOW BEFORE MIDNIGHT!! üöÄüî•"
  }
];

const FINAL_COPY = `<strong>Subject:</strong> The chapter that changes everything\n\n<strong>Body:</strong>\nFriend,\n\nAmerica's greatest chapter hasn't been written yet ‚Äî and YOU hold the pen.\n\nRight now, we're just $12,000 away from our goal to flip District 7. And thanks to a group of dedicated patriots, every dollar you give tonight is TRIPLED.\n\n<strong>Your $5 becomes $15. But only until midnight.</strong>\n\nJoin 47,000 Americans who are writing the next chapter ‚Äî not with fear, but with action.\n\n‚Üí <u>Rush your 3X-matched gift now</u>\n\n<strong>P.S.</strong> Your 3X match expires at midnight tonight. Don't leave $10 on the table ‚Äî give your $5 now and make it count three times over.`;

let running = false;
let slowMode = true;

function toggleSpeed() {
  slowMode = !slowMode;
  const btn = document.getElementById('speedToggle');
  btn.textContent = slowMode ? 'üê¢ Presentation' : 'üêá Fast';
  btn.classList.toggle('fast', !slowMode);
}

function resetAll() {
  running = false;
  ['patriotChat','skepticChat','urgencyChat'].forEach(id => document.getElementById(id).innerHTML = '');
  document.getElementById('winnerBar').classList.remove('visible');
  document.getElementById('winnerBar').style.display = 'none';
  document.getElementById('progressWrap').style.display = 'none';
  document.getElementById('modeToggle').style.display = 'none';
  document.getElementById('runBtn').style.display = '';
  document.getElementById('resetBtn').style.display = 'none';
  showChat();
}

function showChat() {
  document.getElementById('chatView').style.display = 'grid';
  document.getElementById('comicView').style.display = 'none';
}

function showComic() {
  document.getElementById('chatView').style.display = 'none';
  document.getElementById('comicView').style.display = 'block';
}

function addMsg(colId, text, turnLabel) {
  return new Promise(resolve => {
    const col = document.getElementById(colId);
    const div = document.createElement('div');
    div.className = 'msg';
    div.innerHTML = `<div class="label">${turnLabel}</div><span class="msg-text"></span><span class="typing-cursor"></span>`;
    col.appendChild(div);
    requestAnimationFrame(() => div.classList.add('visible'));
    const span = div.querySelector('.msg-text');
    const cursor = div.querySelector('.typing-cursor');
    let i = 0;
    const speed = slowMode ? Math.max(35, 60 - Math.floor(text.length / 20)) : Math.max(8, 18 - Math.floor(text.length / 40));
    const tick = () => {
      if (i < text.length) {
        span.textContent += text[i++];
        col.scrollTop = col.scrollHeight;
        setTimeout(tick, speed);
      } else {
        cursor.remove();
        resolve();
      }
    };
    tick();
  });
}

function addStreamMsg(colId, turnLabel) {
  const col = document.getElementById(colId);
  const div = document.createElement('div');
  div.className = 'msg visible';
  div.innerHTML = `<div class="label">${turnLabel}</div><span class="msg-text"></span><span class="typing-cursor"></span>`;
  col.appendChild(div);
  const span = div.querySelector('.msg-text');
  const cursor = div.querySelector('.typing-cursor');
  return {
    append(text) { span.textContent += text; col.scrollTop = col.scrollHeight; },
    finish() { cursor.remove(); },
    getText() { return span.textContent; }
  };
}

async function runShootoutLive() {
  const draft = document.getElementById('userDraft').value.trim();
  if (!draft) return;
  running = true;
  document.getElementById('runBtn').style.display = 'none';
  document.getElementById('resetBtn').style.display = '';
  document.getElementById('progressWrap').style.display = 'block';
  const bar = document.getElementById('progressBar');
  const chars = ['patriot', 'skeptic', 'urgency'];
  const colIds = { patriot: 'patriotChat', skeptic: 'skepticChat', urgency: 'urgencyChat' };
  const history = { patriot: [], skeptic: [], urgency: [] };
  const allTexts = [];

  try {
    const rounds = LiveMode.ROUND_PROMPTS;
    for (let r = 0; r < rounds.length; r++) {
      bar.style.width = ((r + 1) / (rounds.length + 1) * 100) + '%';
      const label = `Round ${r + 1}`;
      const historyStr = allTexts.map(t => `${t.who}: ${t.text}`).join('\n');
      const userPrompt = rounds[r](draft, historyStr);

      const roundTexts = {};
      await Promise.all(chars.map(async (char) => {
        const handle = addStreamMsg(colIds[char], label);
        try {
          for await (const chunk of LiveMode.streamCharacter(char, LiveMode.SYSTEM_PROMPTS[char], userPrompt, history[char])) {
            handle.append(chunk);
          }
        } catch (e) {
          console.error(`Live ${char} failed:`, e);
          throw e;
        }
        handle.finish();
        const text = handle.getText();
        roundTexts[char] = text;
        history[char].push({ role: 'user', content: userPrompt });
        history[char].push({ role: 'assistant', content: text });
      }));

      for (const char of chars) {
        allTexts.push({ who: char, text: roundTexts[char] });
      }
      if (!running) return;
      await new Promise(r => setTimeout(r, 400));
    }

    bar.style.width = '95%';
    const historyStr = allTexts.map(t => `${t.who}: ${t.text}`).join('\n');
    const consensusPrompt = LiveMode.CONSENSUS_PROMPT(draft, historyStr);
    let finalText = '';
    const consensusChar = 'patriot';
    for await (const chunk of LiveMode.streamCharacter(consensusChar, 'You are a master fundraising copywriter.', consensusPrompt, [])) {
      finalText += chunk;
    }
    bar.style.width = '100%';
    const wb = document.getElementById('winnerBar');
    document.getElementById('finalCopy').textContent = finalText;
    wb.style.display = 'block';
    requestAnimationFrame(() => wb.classList.add('visible'));
  } catch (e) {
    LiveMode.toast('‚ö†Ô∏è Live failed, falling back to simulation');
    console.error('Live mode error:', e);
    resetAll();
    await runShootoutSimulated();
  }
}

async function runShootoutSimulated() {
  running = true;
  document.getElementById('runBtn').style.display = 'none';
  document.getElementById('resetBtn').style.display = '';
  document.getElementById('progressWrap').style.display = 'block';
  const bar = document.getElementById('progressBar');

  for (let i = 0; i < SCRIPT.length; i++) {
    const s = SCRIPT[i];
    bar.style.width = ((i + 1) / SCRIPT.length * 100) + '%';
    const label = `Round ${s.turn}`;
    await Promise.all([
      addMsg('patriotChat', s.patriot, label),
      addMsg('skepticChat', s.skeptic, label),
      addMsg('urgencyChat', s.urgency, label)
    ]);
    if (!running) return;
    await new Promise(r => setTimeout(r, slowMode ? 2000 : 400));
  }

  const wb = document.getElementById('winnerBar');
  document.getElementById('finalCopy').innerHTML = FINAL_COPY;
  wb.style.display = 'block';
  requestAnimationFrame(() => wb.classList.add('visible'));
  document.getElementById('modeToggle').style.display = 'flex';
}

async function runShootout() {
  if (running) return;
  if (LiveMode.enabled) {
    await runShootoutLive();
  } else {
    await runShootoutSimulated();
  }
}
</script>
</body>
</html>
