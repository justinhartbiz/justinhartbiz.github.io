<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Creative Shootout ‚Äî The Saga | DonorBureau</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Lato:wght@400;600;700&family=Open+Sans:wght@400;500;600&display=swap');
:root{
  --db-navy:#0E3358;
  --db-navy-light:#1a4a7a;
  --db-gold:#F2AA1F;
  --db-gold-light:#f5be50;
  --db-white:#FFFFFF;
  --db-light-gray:#EEEFF0;
  --db-dark-gray:#30353B;
  --accent-red:#ef4444;
  --accent-green:#10b981;
  --text:#333;
  --text-muted:#666;
}
body{background:var(--db-light-gray);color:var(--text);font-family:'Open Sans',sans-serif;min-height:100vh;overflow-x:hidden}
.container{max-width:1100px;margin:0 auto;padding:20px}

header{text-align:center;padding:20px 20px 10px;background:var(--db-navy);border-radius:12px;margin-bottom:16px}
.db-logo{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:10px}
.db-logo-icon{width:36px;height:36px;background:var(--db-gold);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:bold;color:var(--db-navy)}
.db-logo-text{font-size:.9rem;font-weight:600;color:var(--db-gold);letter-spacing:.5px}
header h1{font-family:'Bangers',cursive;font-size:2.5em;letter-spacing:3px;color:var(--db-white)}
header h1 span{color:var(--db-gold)}
header p{color:rgba(255,255,255,.8);margin-top:4px;font-size:.9em}

.controls{text-align:center;margin:16px 0;background:var(--db-white);padding:16px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.btn{padding:12px 28px;border:none;border-radius:8px;font-weight:700;font-size:1em;cursor:pointer;transition:all .2s}
.btn-go{background:var(--db-gold);color:var(--db-navy);font-family:'Bangers',cursive;font-size:1.2em;letter-spacing:2px}
.btn-go:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(242,170,31,.4)}
.btn-go:disabled{opacity:.4;cursor:default;transform:none;box-shadow:none}
.btn-reset{background:var(--db-light-gray);border:2px solid var(--text-muted);color:var(--text-muted);margin-left:12px;display:none}
.btn-reset:hover{border-color:var(--db-navy);color:var(--db-navy)}
.btn-back{background:var(--db-white);border:2px solid var(--db-navy);color:var(--db-navy);margin-left:12px;text-decoration:none;font-weight:700;font-size:1em;padding:12px 20px;border-radius:8px}
.btn-back:hover{background:var(--db-navy);color:var(--db-white)}
.mode-toggle{display:inline-block;margin-left:16px;padding:10px 20px;border:2px solid var(--db-navy);border-radius:8px;cursor:pointer;font-weight:700;font-size:.95em;transition:all .3s;vertical-align:middle;background:var(--db-white)}
.mode-toggle:hover{box-shadow:0 0 12px rgba(14,51,88,.2)}
.mode-toggle.live{border-color:var(--accent-red);color:var(--accent-red);box-shadow:0 0 16px rgba(239,68,68,.3)}

.progress{height:4px;background:rgba(14,51,88,.1);border-radius:2px;margin:12px 0;overflow:hidden;display:none}
.progress-bar{height:100%;width:0;background:linear-gradient(90deg,var(--db-navy),var(--db-gold));transition:width .5s;border-radius:2px}

/* Round titles */
.round-title{font-family:'Bangers',cursive;font-size:1.6em;letter-spacing:3px;text-align:center;padding:20px 0 8px;opacity:0;transform:translateY(12px);transition:all .5s}
.round-title.visible{opacity:1;transform:translateY(0)}
.round-title.r1{color:var(--db-navy)}
.round-title.r2{color:var(--db-gold)}
.round-title.r3{color:var(--accent-green)}
.round-title span.sub{display:block;font-family:'Open Sans',sans-serif;font-size:.45em;color:var(--text-muted);letter-spacing:0;font-weight:400;margin-top:2px}

/* Comic Grid */
.comic-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:8px}
.panel{position:relative;background:var(--db-white);border:4px solid rgba(14,51,88,.15);border-radius:8px;overflow:hidden;aspect-ratio:16/10;opacity:0;transform:scale(.95);transition:all .6s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px rgba(0,0,0,.08)}
.panel.visible{opacity:1;transform:scale(1)}
.panel.p1{border-color:var(--db-navy)}
.panel.p2{border-color:var(--db-gold)}
.panel.p3{border-color:var(--accent-red)}
.panel.p4{border-color:var(--accent-green)}

.panel img{width:100%;height:100%;object-fit:cover;display:block;filter:grayscale(.1) contrast(1.05)}
.round2 .panel img{transform:scaleX(-1)}

.panel-number{position:absolute;top:8px;left:10px;background:rgba(255,255,255,.95);border:2px solid currentColor;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-family:'Bangers',cursive;font-size:1.1em;z-index:3}
.p1 .panel-number{color:var(--db-navy)}
.p2 .panel-number{color:var(--db-gold)}
.p3 .panel-number{color:var(--accent-red)}
.p4 .panel-number{color:var(--accent-green)}

/* Speech Bubbles */
.bubble{position:absolute;background:var(--db-white);color:var(--text);padding:10px 14px;border-radius:16px;font-size:.82em;line-height:1.35;font-weight:700;max-width:55%;z-index:2;opacity:0;transform:translateY(8px);transition:all .4s .2s;box-shadow:2px 3px 12px rgba(0,0,0,.15);border:2px solid rgba(14,51,88,.1)}
.bubble.show{opacity:1;transform:translateY(0)}
.bubble::after{content:'';position:absolute;bottom:-10px;left:30px;border:10px solid transparent;border-top-color:var(--db-white)}
.bubble.right::after{left:auto;right:30px}
.bubble.bottom-left{bottom:12px;left:12px}
.bubble.top-right{top:48px;right:12px}
.bubble.top-right::after{bottom:auto;top:-10px;border-top-color:transparent;border-bottom-color:var(--db-white);right:30px;left:auto}
.bubble.top-left{top:48px;left:12px}
.bubble.top-left::after{bottom:auto;top:-10px;border-top-color:transparent;border-bottom-color:var(--db-white)}
.bubble.bottom-right{bottom:12px;right:12px}
.bubble.bottom-right::after{left:auto;right:30px}

/* Loading overlay */
.loading-overlay{position:absolute;inset:0;background:var(--db-white);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:5;transition:opacity .5s}
.loading-overlay.hide{opacity:0;pointer-events:none}
.loading-text{font-family:'Open Sans',sans-serif;font-size:.85em;color:var(--text-muted)}
.loading-spinner{width:40px;height:40px;border:3px solid var(--db-light-gray);border-top-color:var(--db-gold);border-radius:50%;animation:spin .8s linear infinite;margin-bottom:10px}
@keyframes spin{to{transform:rotate(360deg)}}

/* Panel Banners */
.panel-banner{position:absolute;top:0;left:0;right:0;z-index:4;padding:4px 14px;font-family:'Bangers',cursive;font-size:1.1em;letter-spacing:3px;text-transform:uppercase;text-align:center;font-weight:700}
.p1 .panel-banner{background:var(--db-navy);color:var(--db-white)}
.p2 .panel-banner{background:var(--db-gold);color:var(--db-navy)}
.p3 .panel-banner{background:var(--accent-red);color:var(--db-white)}
.p4 .panel-banner{background:var(--accent-green);color:var(--db-white)}

.caption{position:absolute;bottom:0;left:0;right:0;background:rgba(14,51,88,.9);color:var(--db-white);font-size:.7em;font-style:italic;padding:4px 10px;text-align:center;z-index:2}

/* Winner */
.winner-bar{display:none;margin-top:16px;background:rgba(16,185,129,.06);border:2px solid var(--accent-green);border-radius:12px;padding:16px 20px;text-align:center}
.winner-bar.show{display:block;animation:fadeUp .5s}
.winner-bar h3{color:var(--accent-green);font-family:'Bangers',cursive;font-size:1.3em;letter-spacing:2px;margin-bottom:8px}
.final-copy{font-family:'Open Sans',sans-serif;font-size:.88em;line-height:1.6;color:var(--text);background:var(--db-light-gray);padding:14px;border-radius:8px;text-align:left}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

/* Footer */
.footer{text-align:center;padding:24px;color:var(--text-muted);font-size:.85em;margin-top:20px}
.footer-brand{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:8px}
.footer-logo{width:24px;height:24px;background:var(--db-gold);border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:bold;color:var(--db-navy);font-size:.7rem}
.footer-text{color:var(--db-navy);font-weight:600}

@media(max-width:700px){
  .comic-grid{grid-template-columns:1fr}
  .bubble{font-size:.75em;max-width:70%}
  header h1{font-size:1.8em}
}
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="db-logo">
      <div class="db-logo-icon">DB</div>
      <div class="db-logo-text">DONORBUREAU</div>
    </div>
    <h1>‚ö° AI Creative <span>Shootout</span></h1>
    <p>The Saga ‚Äî 3 Rounds of AI Debate in Comic Strip Mode</p>
  </header>

  <div class="controls">
    <button class="btn btn-go" id="goBtn" onclick="generate()">üí• GENERATE ROUND 1</button>
    <button class="btn btn-reset" id="resetBtn" onclick="resetAll()">‚Ü∫ Reset</button>
    <a href="index.html" class="btn-back">‚Üê Back to Chat Mode</a>
    <div class="mode-toggle" id="modeToggle" onclick="toggleLive()">
      <span id="modeIcon">‚ö™</span> <span id="modeText">Simulation Mode</span>
    </div>
  </div>

  <div class="progress" id="progress"><div class="progress-bar" id="bar"></div></div>

  <!-- ROUND 1 -->
  <div class="round-title r1" id="roundTitle1">‚öîÔ∏è ROUND 1 ‚Äî THE INITIAL FIGHT<span class="sub">The AI agents read the first draft...</span></div>
  <div class="comic-grid round1" id="round1">
    <div class="panel p1" id="panel1">
      <div class="loading-overlay" id="load1"><div class="loading-spinner"></div><div class="loading-text">Generating panel 1...</div></div>
      <div class="panel-banner">üá∫üá∏ THE PATRIOT</div>
      <div class="panel-number">1</div>
      <img src="comic-assets/panel1-patriot.png" alt="The Patriot">
      <div class="bubble bottom-left" id="b1">"Too DARK! Where is the shining city on a hill? This reads like a funeral notice!"</div>
      <div class="caption">ü¶Ö The Patriot reads the draft and sees only doom</div>
    </div>
    <div class="panel p2" id="panel2">
      <div class="loading-overlay" id="load2"><div class="loading-spinner"></div><div class="loading-text">Generating panel 2...</div></div>
      <div class="panel-banner">üîç THE SKEPTIC</div>
      <div class="panel-number">2</div>
      <img src="comic-assets/panel2-skeptic.png" alt="The Skeptic">
      <div class="bubble top-right" id="b2">"This is a SCAM template. 'Destroying our values'? Show me one fact. ONE."</div>
      <div class="caption">üîç The Skeptic smells fundraising boilerplate</div>
    </div>
    <div class="panel p3" id="panel3">
      <div class="loading-overlay" id="load3"><div class="loading-spinner"></div><div class="loading-text">Generating panel 3...</div></div>
      <div class="panel-banner">üî• THE URGENCY</div>
      <div class="panel-number">3</div>
      <img src="comic-assets/panel3-urgency.png" alt="The Urgency">
      <div class="bubble bottom-right right" id="b3">"BORING! No deadline, no match, no caps... my GRANDMA writes more urgent emails! üò¥"</div>
      <div class="caption">üî• The Urgency almost falls asleep ‚Äî WHERE'S THE FIRE?!</div>
    </div>
    <div class="panel p4" id="panel4">
      <div class="loading-overlay" id="load4"><div class="loading-spinner"></div><div class="loading-text">Generating panel 4...</div></div>
      <div class="panel-banner">ü§ù CONSENSUS</div>
      <div class="panel-number">4</div>
      <img src="comic-assets/panel4-consensus.png" alt="Consensus">
      <div class="bubble top-left" id="b4">"Unanimous rejection. Back to the drawing board. Rewriting now..."</div>
      <div class="caption">ü§ù Even Consensus can't save this one. Rewrite ordered.</div>
    </div>
  </div>

  <!-- ROUND 2 -->
  <div class="round-title r2" id="roundTitle2">üìù ROUND 2 ‚Äî THE REWRITE DEBATE<span class="sub">The second draft lands... closer, but not there yet</span></div>
  <div class="comic-grid round2" id="round2">
    <div class="panel p1" id="panel5">
      <div class="loading-overlay" id="load5"><div class="loading-spinner"></div><div class="loading-text">Generating panel 5...</div></div>
      <div class="panel-banner">üá∫üá∏ THE PATRIOT</div>
      <div class="panel-number">5</div>
      <img src="comic-assets/panel1-patriot.png" alt="The Patriot">
      <div class="bubble bottom-left" id="b5">"Better... but it needs MORE FLAG. Say 'patriots' at least twice. And add an eagle."</div>
      <div class="caption">ü¶Ö The Patriot nods slowly... but wants more America</div>
    </div>
    <div class="panel p2" id="panel6">
      <div class="loading-overlay" id="load6"><div class="loading-spinner"></div><div class="loading-text">Generating panel 6...</div></div>
      <div class="panel-banner">üîç THE SKEPTIC</div>
      <div class="panel-number">6</div>
      <img src="comic-assets/panel2-skeptic.png" alt="The Skeptic">
      <div class="bubble top-right" id="b6">"Still vague. 'Make a difference'? That means NOTHING. Give me the district number."</div>
      <div class="caption">üîç The Skeptic demands receipts</div>
    </div>
    <div class="panel p3" id="panel7">
      <div class="loading-overlay" id="load7"><div class="loading-spinner"></div><div class="loading-text">Generating panel 7...</div></div>
      <div class="panel-banner">üî• THE URGENCY</div>
      <div class="panel-number">7</div>
      <img src="comic-assets/panel3-urgency.png" alt="The Urgency">
      <div class="bubble bottom-right right" id="b7">"MORE CAPS! The match should be in BOLD. And add '‚è∞ EXPIRES TONIGHT' or we're DONE! üî•"</div>
      <div class="caption">üî• The Urgency slams the desk ‚Äî LOUDER!</div>
    </div>
    <div class="panel p4" id="panel8">
      <div class="loading-overlay" id="load8"><div class="loading-spinner"></div><div class="loading-text">Generating panel 8...</div></div>
      <div class="panel-banner">ü§ù CONSENSUS</div>
      <div class="panel-number">8</div>
      <img src="comic-assets/panel4-consensus.png" alt="Consensus">
      <div class="bubble top-left" id="b8">"Progress! Merging notes: specifics + patriotism + urgency. One more pass..."</div>
      <div class="caption">ü§ù Consensus scribbles furiously. Almost there.</div>
    </div>
  </div>

  <!-- ROUND 3 -->
  <div class="round-title r3" id="roundTitle3">üèÜ ROUND 3 ‚Äî THE FINAL POLISH<span class="sub">Third draft. The moment of truth.</span></div>
  <div class="comic-grid round3" id="round3">
    <div class="panel p1" id="panel9">
      <div class="loading-overlay" id="load9"><div class="loading-spinner"></div><div class="loading-text">Generating panel 9...</div></div>
      <div class="panel-banner">üá∫üá∏ THE PATRIOT</div>
      <div class="panel-number">9</div>
      <img src="comic-assets/panel1-patriot.png" alt="The Patriot">
      <div class="bubble bottom-left" id="b9">"NOW we're talking! 'Patriots like you'... 'America's greatest chapter'... I'm tearing up. üá∫üá∏"</div>
      <div class="caption">ü¶Ö The Patriot salutes. A single tear rolls.</div>
    </div>
    <div class="panel p2" id="panel10">
      <div class="loading-overlay" id="load10"><div class="loading-spinner"></div><div class="loading-text">Generating panel 10...</div></div>
      <div class="panel-banner">üîç THE SKEPTIC</div>
      <div class="panel-number">10</div>
      <img src="comic-assets/panel2-skeptic.png" alt="The Skeptic">
      <div class="bubble top-right" id="b10">"District 7... $12,000 goal... 3X match with a source. Fine. I'll allow it. ‚úì"</div>
      <div class="caption">üîç The Skeptic removes her glasses. Respect earned.</div>
    </div>
    <div class="panel p3" id="panel11">
      <div class="loading-overlay" id="load11"><div class="loading-spinner"></div><div class="loading-text">Generating panel 11...</div></div>
      <div class="panel-banner">üî• THE URGENCY</div>
      <div class="panel-number">11</div>
      <img src="comic-assets/panel3-urgency.png" alt="The Urgency">
      <div class="bubble bottom-right right" id="b11">"MIDNIGHT DEADLINE ‚úÖ TRIPLE MATCH ‚úÖ CAPS WHERE IT COUNTS ‚úÖ ...I think I'm gonna cry. üî•"</div>
      <div class="caption">üî• The Urgency wipes away a fiery tear of joy</div>
    </div>
    <div class="panel p4" id="panel12">
      <div class="loading-overlay" id="load12"><div class="loading-spinner"></div><div class="loading-text">Generating panel 12...</div></div>
      <div class="panel-banner">ü§ù CONSENSUS</div>
      <div class="panel-number">12</div>
      <img src="comic-assets/panel4-consensus.png" alt="Consensus">
      <div class="bubble top-left" id="b12">"SHIPPED. Three rounds, three rewrites, one perfect email. That's AI Creative Shootout."</div>
      <div class="caption">ü§ù They shake hands. The copy is reborn.</div>
    </div>
  </div>

  <div class="winner-bar" id="winner">
    <h3>‚úÖ CONSENSUS ‚Äî Final Rewrite (after 3 rounds)</h3>
    <div class="final-copy">
      <strong>Subject:</strong> The chapter that changes everything<br><br>
      <strong>Body:</strong><br>
      Friend,<br><br>
      America's greatest chapter hasn't been written yet ‚Äî and patriots like YOU hold the pen.<br><br>
      Right now, we're just $12,000 away from our goal to flip District 7. And thanks to a group of dedicated patriots, every dollar you give tonight is TRIPLED.<br><br>
      <strong>Your $5 becomes $15. But only until midnight. ‚è∞</strong><br><br>
      ‚Üí <u>Rush your 3X-matched gift now</u><br><br>
      <strong>P.S.</strong> Your 3X match expires at midnight tonight. Don't leave $10 on the table.
    </div>
  </div>

  <div class="footer">
    <div class="footer-brand">
      <div class="footer-logo">DB</div>
      <div class="footer-text">DONORBUREAU</div>
    </div>
    AI Creative Shootout ‚Äî Comic Strip Mode
  </div>
</div>

<script>
const PANEL_DELAY = 800;
let currentRound = 0;
let liveMode = false;

const SIM_IMAGES = {
  1:'comic-assets/panel1-patriot.png',2:'comic-assets/panel2-skeptic.png',3:'comic-assets/panel3-urgency.png',4:'comic-assets/panel4-consensus.png',
  5:'comic-assets/panel1-patriot.png',6:'comic-assets/panel2-skeptic.png',7:'comic-assets/panel3-urgency.png',8:'comic-assets/panel4-consensus.png',
  9:'comic-assets/panel1-patriot.png',10:'comic-assets/panel2-skeptic.png',11:'comic-assets/panel3-urgency.png',12:'comic-assets/panel4-consensus.png'
};

// Live mode: AI-generated images via Wavespeed z-image/turbo
const LIVE_IMAGES = {
  1:'comic-assets/live/patriot.jpg',2:'comic-assets/live/skeptic.jpg',3:'comic-assets/live/urgency.jpg',4:'comic-assets/live/consensus.jpg',
  5:'comic-assets/live/patriot.jpg',6:'comic-assets/live/skeptic.jpg',7:'comic-assets/live/urgency.jpg',8:'comic-assets/live/consensus.jpg',
  9:'comic-assets/live/patriot.jpg',10:'comic-assets/live/skeptic.jpg',11:'comic-assets/live/urgency.jpg',12:'comic-assets/live/consensus.jpg'
};

// Live prompts used to generate comic-assets/live/*.jpg via Wavespeed z-image/turbo

function toggleLive() {
  liveMode = !liveMode;
  const toggle = document.getElementById('modeToggle');
  const icon = document.getElementById('modeIcon');
  const text = document.getElementById('modeText');
  if (liveMode) {
    toggle.classList.add('live');
    icon.textContent = 'üî¥';
    text.textContent = 'Live Mode (Wavespeed AI)';
  } else {
    toggle.classList.remove('live');
    icon.textContent = '‚ö™';
    text.textContent = 'Simulation Mode';
  }
}

function getLiveImage(panelNum) {
  return LIVE_IMAGES[panelNum];
}

function getPanelSrc(panelNum) {
  if (!liveMode) return SIM_IMAGES[panelNum];
  return null;
}

async function generate() {
  const btn = document.getElementById('goBtn');
  document.getElementById('resetBtn').style.display = 'inline-block';
  document.getElementById('progress').style.display = 'block';

  currentRound++;
  btn.disabled = true;

  if (currentRound === 1) await revealRound(1, [1,2,3,4], () => { btn.disabled = false; btn.textContent = 'üí• GENERATE ROUND 2'; });
  else if (currentRound === 2) await revealRound(2, [5,6,7,8], () => { btn.disabled = false; btn.textContent = 'üí• GENERATE ROUND 3'; });
  else if (currentRound === 3) await revealRound(3, [9,10,11,12], () => {
    btn.style.display = 'none';
    setTimeout(() => {
      document.getElementById('winner').classList.add('show');
      document.getElementById('bar').style.width = '100%';
    }, 600);
  });
}

async function revealRound(round, panels, onDone) {
  const totalAll = 12;
  const title = document.getElementById('roundTitle' + round);
  title.classList.add('visible');
  title.scrollIntoView({ behavior: 'smooth', block: 'start' });

  for (let i = 0; i < panels.length; i++) {
    const panelNum = panels[i];
    const pct = (panelNum / (totalAll + 1)) * 100;
    document.getElementById('bar').style.width = pct + '%';

    const img = document.getElementById('panel' + panelNum).querySelector('img');

    if (liveMode) {
      img.src = getLiveImage(panelNum);
    } else {
      img.src = getPanelSrc(panelNum);
    }

    document.getElementById('load' + panelNum).classList.add('hide');
    document.getElementById('panel' + panelNum).classList.add('visible');
    setTimeout(() => { document.getElementById('b' + panelNum).classList.add('show'); }, 400);
    document.getElementById('panel' + panelNum).scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    if (i < panels.length - 1) {
      await new Promise(r => setTimeout(r, PANEL_DELAY));
    }
  }

  if (onDone) setTimeout(onDone, 600);
}

function resetAll() {
  currentRound = 0;
  const btn = document.getElementById('goBtn');
  btn.style.display = '';
  btn.disabled = false;
  btn.textContent = 'üí• GENERATE ROUND 1';
  document.getElementById('resetBtn').style.display = 'none';
  document.getElementById('progress').style.display = 'none';
  document.getElementById('bar').style.width = '0';
  document.getElementById('winner').classList.remove('show');
  for (let i = 1; i <= 12; i++) {
    document.getElementById('panel' + i).classList.remove('visible');
    document.getElementById('load' + i).classList.remove('hide');
    document.getElementById('b' + i).classList.remove('show');
  }
  for (let r = 1; r <= 3; r++) {
    document.getElementById('roundTitle' + r).classList.remove('visible');
  }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
