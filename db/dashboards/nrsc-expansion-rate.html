<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NRSC Creative Expansion Rate â€” 24 Week Tracker</title>
<script>
(function(){
  const k='db_auth';
  if(sessionStorage.getItem(k)==='1') return;
  const p=prompt('Enter password:');
  if(p!=='donor2026'){document.documentElement.innerHTML='<body style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:sans-serif;background:#EEEFF0"><h2 style="color:#0E3358">Access Denied</h2></body>';throw new Error('blocked');}
  sessionStorage.setItem(k,'1');
})();
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0E3358;
    --gold: #F2AA1F;
    --blue: #2EA3F2;
    --light-gray: #EEEFF0;
    --dark-gray: #30353B;
    --text: #666666;
    --text-dark: #333333;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--light-gray); color:var(--text); font-family:'Open Sans',Arial,sans-serif; min-height:100vh; }
  .header { background:var(--navy); padding:16px 28px; display:flex; align-items:center; gap:16px; }
  .header img { height:32px; }
  .header-text { color:#fff; font-family:'Lato',sans-serif; font-size:0.8rem; opacity:0.7; letter-spacing:1px; text-transform:uppercase; }
  .container { max-width:1100px; margin:0 auto; padding:24px 20px; }
  h1 { font-family:'Lato',sans-serif; font-size:1.8rem; color:var(--navy); margin-bottom:4px; font-weight:900; }
  .subtitle { color:var(--text); font-size:0.85rem; margin-bottom:24px; }
  .kpi-row { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:24px; }
  .kpi { background:#fff; border-radius:8px; padding:18px; box-shadow:0 2px 8px rgba(0,0,0,0.06); border-top:3px solid var(--navy); }
  .kpi-label { font-size:0.7rem; color:var(--text); text-transform:uppercase; letter-spacing:1px; margin-bottom:6px; font-weight:600; }
  .kpi-value { font-size:1.8rem; font-weight:900; color:var(--navy); font-family:'Lato',sans-serif; }
  .kpi-sub { font-size:0.7rem; color:#999; margin-top:4px; }
  .kpi-value.gold { color:var(--gold); }
  .kpi-value.green { color:#2ecc71; }
  .kpi-value.red { color:#e74c3c; }
  .panel { background:#fff; border-radius:8px; padding:24px; margin-bottom:20px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
  .panel-title { font-family:'Lato',sans-serif; font-size:1.1rem; color:var(--navy); margin-bottom:16px; font-weight:700; border-bottom:2px solid var(--gold); padding-bottom:8px; display:inline-block; }
  .chart-wrap { position:relative; height:320px; }
  table { width:100%; border-collapse:collapse; font-size:0.78rem; }
  th { text-align:left; color:var(--navy); font-size:0.68rem; text-transform:uppercase; letter-spacing:1px; padding:10px 10px; border-bottom:2px solid var(--navy); font-weight:700; }
  td { padding:9px 10px; border-bottom:1px solid #eee; }
  tr:hover td { background:rgba(242,170,31,0.06); }
  .rate-bar { display:inline-block; height:14px; border-radius:3px; background:linear-gradient(90deg,var(--gold),var(--blue)); vertical-align:middle; margin-right:6px; min-width:2px; }
  .rate-zero { opacity:0.3; }
  .trend-up { color:#2ecc71; font-weight:700; }
  .trend-down { color:#e74c3c; font-weight:700; }
  .annotation { font-size:0.78rem; color:var(--text-dark); background:#fff; border-left:4px solid var(--gold); border-radius:0 8px 8px 0; padding:14px 18px; margin-top:16px; line-height:1.6; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
  .annotation strong { color:var(--navy); }
  .footer { text-align:center; padding:20px; font-size:0.7rem; color:#999; }
  @media(max-width:700px){ .kpi-row{grid-template-columns:repeat(2,1fr);} h1{font-size:1.3rem;} }
</style>
</head>
<body>
<div class="header">
  <img src="https://donorbureau.sitepreview.co/assets/uploads/sites/627/2020/03/home_03.png" alt="DonorBureau" onerror="this.style.display='none'">
  <span class="header-text">Creative Analytics</span>
</div>
<div class="container">
  <h1>ðŸ“ˆ NRSC Expansion Rate Tracker</h1>
  <p class="subtitle">24-week creative expansion rate â€” % of test creatives expanded to D10+ | Updated Feb 17, 2026</p>

  <div class="kpi-row">
    <div class="kpi">
      <div class="kpi-label">Total Tested</div>
      <div class="kpi-value" id="kpi-tested">â€”</div>
      <div class="kpi-sub">Unique creatives (24 wks)</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Total Expanded</div>
      <div class="kpi-value green" id="kpi-expanded">â€”</div>
      <div class="kpi-sub">Reached D10 / Millitile</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Overall Rate</div>
      <div class="kpi-value gold" id="kpi-rate">â€”</div>
      <div class="kpi-sub">Expansion %</div>
    </div>
    <div class="kpi">
      <div class="kpi-label">Recent 4-Wk Rate</div>
      <div class="kpi-value" id="kpi-recent">â€”</div>
      <div class="kpi-sub" id="kpi-recent-sub">vs prior 4-wk</div>
    </div>
  </div>

  <div class="panel">
    <div class="panel-title">Expansion Rate by Week</div>
    <div class="chart-wrap"><canvas id="rateChart"></canvas></div>
  </div>

  <div class="panel">
    <div class="panel-title">Volume: Tested vs Expanded</div>
    <div class="chart-wrap"><canvas id="volChart"></canvas></div>
  </div>

  <div class="panel">
    <div class="panel-title">Weekly Detail</div>
    <div style="overflow-x:auto;">
      <table id="weekTable">
        <thead><tr><th>Week</th><th>Dates</th><th>Tested</th><th>Expanded</th><th>Rate</th><th>Visual</th><th>Trend</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="annotation">
    <strong>How to read this:</strong> Each week, NRSC tests new creatives at Decile 9-6. Winners get expanded to D10 or Millitile segments. 
    The <strong>expansion rate</strong> is the % of creatives that earned expansion â€” a direct measure of creative quality. 
    Rising rate = better creative selection. Track this as AI-assisted picks come online.
  </div>
</div>
<div class="footer">DonorBureau Creative Analytics Â· Powered by Railstote ðŸ¦‰</div>

<script>
const DATA = [
  {week:"W35",dates:"Aug 25â€“31",tested:10,expanded:7,rate:70.0},
  {week:"W36",dates:"Sep 1â€“7",tested:5,expanded:2,rate:40.0},
  {week:"W37",dates:"Sep 8â€“14",tested:6,expanded:1,rate:16.7},
  {week:"W38",dates:"Sep 15â€“21",tested:6,expanded:2,rate:33.3},
  {week:"W39",dates:"Sep 22â€“28",tested:9,expanded:2,rate:22.2},
  {week:"W40",dates:"Sep 29â€“Oct 5",tested:10,expanded:2,rate:20.0},
  {week:"W41",dates:"Oct 6â€“12",tested:5,expanded:1,rate:20.0},
  {week:"W42",dates:"Oct 13â€“19",tested:2,expanded:1,rate:50.0},
  {week:"W43",dates:"Oct 20â€“26",tested:8,expanded:3,rate:37.5},
  {week:"W44",dates:"Oct 27â€“Nov 2",tested:5,expanded:0,rate:0},
  {week:"W45",dates:"Nov 3â€“9",tested:4,expanded:0,rate:0},
  {week:"W46",dates:"Nov 10â€“16",tested:10,expanded:0,rate:0},
  {week:"W47",dates:"Nov 17â€“23",tested:2,expanded:0,rate:0},
  {week:"W48",dates:"Nov 24â€“30",tested:9,expanded:2,rate:22.2},
  {week:"W49",dates:"Dec 1â€“7",tested:4,expanded:1,rate:25.0},
  {week:"W50",dates:"Dec 8â€“14",tested:5,expanded:1,rate:20.0},
  {week:"W51",dates:"Dec 15â€“21",tested:7,expanded:2,rate:28.6},
  {week:"W52",dates:"Dec 22â€“28",tested:2,expanded:0,rate:0},
  {week:"W01",dates:"Dec 29â€“Jan 4",tested:14,expanded:5,rate:35.7},
  {week:"W02",dates:"Jan 5â€“11",tested:4,expanded:3,rate:75.0},
  {week:"W03",dates:"Jan 12â€“18",tested:7,expanded:0,rate:0},
  {week:"W04",dates:"Jan 19â€“25",tested:6,expanded:0,rate:0},
  {week:"W05",dates:"Jan 26â€“Feb 1",tested:10,expanded:3,rate:30.0},
  {week:"W06",dates:"Feb 2â€“8",tested:14,expanded:4,rate:28.6},
  {week:"W07",dates:"Feb 9â€“15",tested:3,expanded:0,rate:0},
];

// KPIs
const totalTested = DATA.reduce((s,d)=>s+d.tested,0);
const totalExpanded = DATA.reduce((s,d)=>s+d.expanded,0);
const overallRate = (totalExpanded/totalTested*100).toFixed(1);
const recent4 = DATA.slice(-4);
const prior4 = DATA.slice(-8,-4);
const r4t = recent4.reduce((s,d)=>s+d.tested,0);
const r4e = recent4.reduce((s,d)=>s+d.expanded,0);
const r4r = r4t ? (r4e/r4t*100).toFixed(1) : 0;
const p4t = prior4.reduce((s,d)=>s+d.tested,0);
const p4e = prior4.reduce((s,d)=>s+d.expanded,0);
const p4r = p4t ? (p4e/p4t*100).toFixed(1) : 0;

document.getElementById('kpi-tested').textContent = totalTested;
document.getElementById('kpi-expanded').textContent = totalExpanded;
document.getElementById('kpi-rate').textContent = overallRate + '%';
const recentEl = document.getElementById('kpi-recent');
recentEl.textContent = r4r + '%';
const diff = (r4r - p4r).toFixed(1);
recentEl.className = 'kpi-value ' + (diff >= 0 ? 'green' : 'red');
document.getElementById('kpi-recent-sub').textContent = (diff >= 0 ? 'â†‘' : 'â†“') + ' ' + Math.abs(diff) + '% vs prior 4-wk (' + p4r + '%)';

// Rate Chart
new Chart(document.getElementById('rateChart').getContext('2d'), {
  type: 'line',
  data: {
    labels: DATA.map(d=>d.week),
    datasets: [{
      label: 'Expansion Rate %',
      data: DATA.map(d=>d.rate),
      borderColor: '#F2AA1F',
      backgroundColor: 'rgba(242,170,31,0.08)',
      fill: true,
      tension: 0.3,
      pointRadius: 5,
      pointBackgroundColor: DATA.map(d=>d.rate>=30?'#2ecc71':d.rate>0?'#F2AA1F':'#e74c3c'),
      pointBorderColor: '#fff',
      pointBorderWidth: 2,
      borderWidth: 2.5
    },{
      label: '4-Wk Moving Avg',
      data: DATA.map((d,i)=>{
        if(i<3) return null;
        const s = DATA.slice(i-3,i+1);
        const t = s.reduce((a,x)=>a+x.tested,0);
        const e = s.reduce((a,x)=>a+x.expanded,0);
        return t ? +(e/t*100).toFixed(1) : 0;
      }),
      borderColor: '#2EA3F2',
      borderDash: [6,4],
      borderWidth: 2,
      pointRadius: 0,
      fill: false,
      tension: 0.3
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: '#666', font: { family: 'Open Sans', size: 11 }}}},
    scales: {
      y: { beginAtZero: true, max: 80, ticks: { color: '#999', callback: v=>v+'%' }, grid: { color: '#eee' }},
      x: { ticks: { color: '#999', font: { size: 10 }}, grid: { display: false }}
    }
  }
});

// Volume Chart
new Chart(document.getElementById('volChart').getContext('2d'), {
  type: 'bar',
  data: {
    labels: DATA.map(d=>d.week),
    datasets: [{
      label: 'Tested',
      data: DATA.map(d=>d.tested),
      backgroundColor: 'rgba(14,51,88,0.6)',
      borderColor: '#0E3358',
      borderWidth: 1,
      borderRadius: 3
    },{
      label: 'Expanded',
      data: DATA.map(d=>d.expanded),
      backgroundColor: 'rgba(242,170,31,0.7)',
      borderColor: '#F2AA1F',
      borderWidth: 1,
      borderRadius: 3
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: '#666', font: { family: 'Open Sans', size: 11 }}}},
    scales: {
      y: { beginAtZero: true, ticks: { color: '#999' }, grid: { color: '#eee' }},
      x: { ticks: { color: '#999', font: { size: 10 }}, grid: { display: false }}
    }
  }
});

// Table
const tbody = document.querySelector('#weekTable tbody');
DATA.forEach((d,i) => {
  const prev = i > 0 ? DATA[i-1].rate : null;
  let trend = '';
  if(prev !== null) {
    const delta = d.rate - prev;
    if(delta > 5) trend = '<span class="trend-up">â–² +' + delta.toFixed(0) + '</span>';
    else if(delta < -5) trend = '<span class="trend-down">â–¼ ' + delta.toFixed(0) + '</span>';
    else trend = '<span style="color:#ccc">â€”</span>';
  }
  const barW = Math.max(d.rate * 1.2, d.rate > 0 ? 3 : 0);
  tbody.innerHTML += '<tr>' +
    '<td style="color:#0E3358;font-weight:700">' + d.week + '</td>' +
    '<td>' + d.dates + '</td>' +
    '<td>' + d.tested + '</td>' +
    '<td style="color:' + (d.expanded?'#2ecc71':'#ccc') + ';font-weight:700">' + d.expanded + '</td>' +
    '<td class="' + (d.rate===0?'rate-zero':'') + '">' + d.rate.toFixed(1) + '%</td>' +
    '<td><span class="rate-bar" style="width:' + barW + 'px"></span></td>' +
    '<td>' + trend + '</td></tr>';
});
</script>
</body>
</html>
