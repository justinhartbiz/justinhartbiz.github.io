<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yield Intelligence Engine ‚Äî DonorBureau</title>
<style>
  :root {
    --bg: #0a0c10;
    --surface: #111318;
    --border: #1e2330;
    --accent: #f59e0b;
    --accent2: #10b981;
    --accent3: #6366f1;
    --danger: #ef4444;
    --text: #e2e8f0;
    --muted: #64748b;
    --card: #161b24;
    --glow: rgba(245, 158, 11, 0.15);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', -apple-system, sans-serif;
    min-height: 100vh;
  }
  
  /* Header */
  .header {
    padding: 24px 32px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, #0a0c10 0%, #0f1520 100%);
  }
  .header-left h1 {
    font-size: 22px;
    font-weight: 700;
    color: var(--accent);
    letter-spacing: -0.5px;
  }
  .header-left p { color: var(--muted); font-size: 13px; margin-top: 3px; }
  .live-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.3);
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    color: var(--accent2);
  }
  .live-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--accent2);
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }
  
  /* Nav */
  .nav {
    display: flex;
    gap: 4px;
    padding: 16px 32px;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
  }
  .nav-btn {
    padding: 8px 18px;
    border-radius: 8px;
    border: 1px solid transparent;
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    transition: all 0.15s;
  }
  .nav-btn:hover { background: var(--surface); color: var(--text); }
  .nav-btn.active {
    background: var(--glow);
    border-color: var(--accent);
    color: var(--accent);
  }
  
  /* Layout */
  .content { padding: 28px 32px; max-width: 1400px; margin: 0 auto; }
  .tab-panel { display: none; }
  .tab-panel.active { display: block; }
  
  /* Stats strip */
  .stats-strip {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
    margin-bottom: 28px;
  }
  .stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    position: relative;
    overflow: hidden;
  }
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--accent);
    opacity: 0.5;
  }
  .stat-card.green::before { background: var(--accent2); }
  .stat-card.purple::before { background: var(--accent3); }
  .stat-card.red::before { background: var(--danger); }
  .stat-label { font-size: 11px; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
  .stat-value { font-size: 26px; font-weight: 800; color: var(--text); margin: 6px 0 2px; line-height: 1; }
  .stat-sub { font-size: 12px; color: var(--muted); }
  
  /* Grid layouts */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
  .full-width { grid-column: 1 / -1; }
  
  /* Cards */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
  }
  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .card-title { font-size: 14px; font-weight: 700; color: var(--text); }
  .card-sub { font-size: 12px; color: var(--muted); margin-top: 3px; }
  .badge {
    font-size: 11px;
    font-weight: 600;
    padding: 3px 10px;
    border-radius: 12px;
  }
  .badge-gold { background: rgba(245,158,11,0.15); color: var(--accent); border: 1px solid rgba(245,158,11,0.3); }
  .badge-green { background: rgba(16,185,129,0.1); color: var(--accent2); border: 1px solid rgba(16,185,129,0.3); }
  .badge-red { background: rgba(239,68,68,0.1); color: var(--danger); border: 1px solid rgba(239,68,68,0.3); }
  .badge-purple { background: rgba(99,102,241,0.1); color: var(--accent3); border: 1px solid rgba(99,102,241,0.3); }
  
  /* Charts */
  .chart-wrap { position: relative; }
  
  /* Bar chart */
  .bar-chart { display: flex; flex-direction: column; gap: 10px; }
  .bar-row { display: flex; align-items: center; gap: 12px; }
  .bar-label { font-size: 12px; color: var(--muted); width: 140px; flex-shrink: 0; text-align: right; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .bar-track { flex: 1; height: 28px; background: rgba(255,255,255,0.04); border-radius: 4px; overflow: hidden; }
  .bar-fill {
    height: 100%;
    border-radius: 4px;
    display: flex;
    align-items: center;
    padding-left: 10px;
    font-size: 11px;
    font-weight: 700;
    color: var(--bg);
    min-width: 60px;
    transition: width 0.6s ease;
  }
  .bar-value { font-size: 12px; color: var(--text); font-weight: 600; width: 80px; text-align: right; flex-shrink: 0; }
  
  /* Tables */
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  th {
    text-align: left;
    padding: 10px 12px;
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border);
  }
  td { padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.04); color: var(--text); }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(255,255,255,0.02); }
  .td-mono { font-family: 'SF Mono', Consolas, monospace; font-size: 12px; }
  
  /* Yield indicator */
  .yield-pill {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
  }
  .yield-nuclear { background: rgba(245,158,11,0.2); color: #fbbf24; }
  .yield-hot { background: rgba(239,68,68,0.15); color: #f87171; }
  .yield-good { background: rgba(16,185,129,0.1); color: #34d399; }
  .yield-avg { background: rgba(100,116,139,0.15); color: #94a3b8; }
  
  /* Sleeping Giant cards */
  .giant-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; }
  .giant-card {
    background: linear-gradient(135deg, rgba(245,158,11,0.08) 0%, rgba(15,21,32,0.9) 100%);
    border: 1px solid rgba(245,158,11,0.25);
    border-radius: 12px;
    padding: 20px;
    position: relative;
    overflow: hidden;
  }
  .giant-card::after {
    content: 'üí§';
    position: absolute;
    top: 16px; right: 16px;
    font-size: 24px;
    opacity: 0.5;
  }
  .giant-rank {
    font-size: 11px;
    font-weight: 800;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  .giant-client { font-size: 16px; font-weight: 800; color: var(--text); }
  .giant-creative { font-size: 13px; color: var(--accent); font-family: monospace; margin-top: 4px; }
  .giant-stats { display: flex; gap: 16px; margin-top: 14px; flex-wrap: wrap; }
  .giant-stat { }
  .giant-stat-label { font-size: 10px; color: var(--muted); font-weight: 600; text-transform: uppercase; }
  .giant-stat-val { font-size: 18px; font-weight: 800; color: var(--accent); }
  .giant-meta { margin-top: 12px; font-size: 12px; color: var(--muted); }
  .action-btn {
    margin-top: 14px;
    padding: 8px 16px;
    background: rgba(245,158,11,0.15);
    border: 1px solid rgba(245,158,11,0.4);
    border-radius: 8px;
    color: var(--accent);
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
    width: 100%;
    text-align: center;
  }
  .action-btn:hover { background: rgba(245,158,11,0.25); }
  
  /* Anomaly highlight */
  .anomaly-box {
    background: linear-gradient(135deg, rgba(245,158,11,0.12) 0%, rgba(99,102,241,0.08) 100%);
    border: 1px solid rgba(245,158,11,0.35);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 24px;
  }
  .anomaly-title { font-size: 18px; font-weight: 800; color: var(--accent); margin-bottom: 8px; }
  .anomaly-body { font-size: 14px; color: var(--text); line-height: 1.7; }
  .anomaly-number { color: var(--accent); font-weight: 800; }
  
  /* Mini chart for trend */
  .sparkline-container { display: flex; align-items: flex-end; gap: 4px; height: 60px; }
  .spark-bar {
    flex: 1;
    background: var(--accent3);
    border-radius: 2px 2px 0 0;
    opacity: 0.7;
    position: relative;
    transition: opacity 0.2s;
  }
  .spark-bar:hover { opacity: 1; }
  .spark-bar.highlight { background: var(--accent); opacity: 1; }
  
  /* Insights section */
  .insight-list { display: flex; flex-direction: column; gap: 12px; }
  .insight-item {
    display: flex;
    gap: 14px;
    padding: 16px;
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    border-left: 3px solid var(--accent);
  }
  .insight-item.green { border-left-color: var(--accent2); }
  .insight-item.purple { border-left-color: var(--accent3); }
  .insight-item.red { border-left-color: var(--danger); }
  .insight-icon { font-size: 20px; flex-shrink: 0; margin-top: 2px; }
  .insight-title { font-size: 14px; font-weight: 700; color: var(--text); }
  .insight-body { font-size: 13px; color: var(--muted); margin-top: 4px; line-height: 1.5; }
  .insight-metric { font-weight: 700; color: var(--text); }
  
  /* Scatter-style dots */
  .dot-chart { position: relative; height: 200px; background: rgba(255,255,255,0.02); border-radius: 8px; overflow: hidden; margin-top: 8px; }
  .dot-point {
    position: absolute;
    width: 8px; height: 8px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
    transition: transform 0.2s;
  }
  .dot-point:hover { transform: translate(-50%, -50%) scale(2); }
  
  @media (max-width: 900px) {
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
    .content { padding: 16px; }
    .header { padding: 16px; flex-direction: column; gap: 12px; align-items: flex-start; }
    .bar-label { width: 100px; font-size: 11px; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="header-left">
    <h1>‚ö° Yield Intelligence Engine</h1>
    <p>Real data ¬∑ 4,119 campaigns ¬∑ $1.19M revenue ¬∑ Jan‚ÄìFeb 2026</p>
  </div>
  <div class="live-badge">
    <div class="live-dot"></div>
    Live Dataset
  </div>
</div>

<nav class="nav">
  <button class="nav-btn active" onclick="switchTab('overview')">üìä Overview</button>
  <button class="nav-btn" onclick="switchTab('giants')">üí§ Sleeping Giants</button>
  <button class="nav-btn" onclick="switchTab('anomaly')">üî• The Anomaly</button>
  <button class="nav-btn" onclick="switchTab('clients')">üë• Clients</button>
  <button class="nav-btn" onclick="switchTab('campaigns')">üèÜ Top Campaigns</button>
  <button class="nav-btn" onclick="switchTab('decay')">üìâ Yield Decay</button>
  <button class="nav-btn" onclick="switchTab('agencies')">üè¢ Agencies</button>
</nav>

<div class="content">

  <!-- OVERVIEW TAB -->
  <div id="tab-overview" class="tab-panel active">
    <div class="stats-strip" id="stats-strip"></div>
    
    <div class="grid-2">
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Revenue by Week</div>
            <div class="card-sub">Weekly estimated revenue trend</div>
          </div>
          <span class="badge badge-gold">7 weeks</span>
        </div>
        <div id="weekly-chart" class="bar-chart"></div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Yield/k by Week</div>
            <div class="card-sub">Revenue per 1,000 sends ‚Äî the efficiency metric</div>
          </div>
          <span class="badge badge-green">Efficiency</span>
        </div>
        <div id="weekly-yield-chart" class="bar-chart"></div>
      </div>
    </div>

    <div class="grid-2">
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Decile Performance</div>
            <div class="card-sub">Yield by audience scoring tier</div>
          </div>
          <span class="badge badge-purple">Scoring</span>
        </div>
        <div id="decile-chart" class="bar-chart"></div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Top Clients by Revenue</div>
            <div class="card-sub">Estimated revenue Jan‚ÄìFeb 2026</div>
          </div>
          <span class="badge badge-gold">Revenue</span>
        </div>
        <div id="client-chart" class="bar-chart"></div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Key Insights</div>
          <div class="card-sub">What the data is telling you right now</div>
        </div>
      </div>
      <div class="insight-list" id="key-insights"></div>
    </div>
  </div>

  <!-- SLEEPING GIANTS TAB -->
  <div id="tab-giants" class="tab-panel">
    <div class="anomaly-box">
      <div class="anomaly-title">üí§ The Sleeping Giants</div>
      <div class="anomaly-body">
        These are <span class="anomaly-number">high-yield creative + client combos</span> that crushed it in January ‚Äî then went dormant in February.
        The data shows exactly which combinations are sitting idle with proven yield signals above <span class="anomaly-number">$100/k</span>.
        Each one is a redeployment opportunity with known upside. The #1 sleeping giant hit <span class="anomaly-number">$1,366/k</span> ‚Äî 
        <span class="anomaly-number">80x its client baseline</span>.
      </div>
    </div>
    <div class="giant-grid" id="giants-grid"></div>
  </div>

  <!-- ANOMALY TAB -->
  <div id="tab-anomaly" class="tab-panel">
    <div class="anomaly-box">
      <div class="anomaly-title">üî• The Hillsdale Anomaly ‚Äî Cr-48 on DB Donors</div>
      <div class="anomaly-body">
        Out of 4,119 campaigns in the dataset, one combination produces yields so far outside normal 
        it looks like a data error ‚Äî but it isn't. Campaign <span class="anomaly-number">178408</span> sent 
        Cr-48 to <span class="anomaly-number">11,435</span> Hillsdale College DB Donors (Decile 10) 
        and generated <span class="anomaly-number">$1,366/k</span> ‚Äî compared to a Hillsdale baseline of <span class="anomaly-number">$16.9/k</span>. 
        That's <span class="anomaly-number">80.8x</span> the client average.
        <br><br>
        The pattern: <strong>DB Donors list + Decile 10 scoring + small batch (10-16k sends) = nuclear zone</strong>. 
        These aren't flukes ‚Äî multiple Hillsdale Cr-48 and Cr-65SMS sends to the same list type confirm the signal.
      </div>
    </div>
    
    <div class="grid-2">
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Cr-48 Campaign Performance Across All Sends</div>
            <div class="card-sub">Yield/k by list size ‚Äî the nuclear zone effect</div>
          </div>
          <span class="badge badge-gold">31 campaigns</span>
        </div>
        <div id="cr48-chart" class="bar-chart"></div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">DB Donors vs DB Responders ‚Äî Yield Gap</div>
            <div class="card-sub">Same creative, different list, massive difference</div>
          </div>
          <span class="badge badge-red">Critical</span>
        </div>
        <div id="list-comparison-chart" class="bar-chart"></div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">The Formula: What Makes a Nuclear Campaign</div>
          <div class="card-sub">3 variables, 1 outcome</div>
        </div>
      </div>
      <div class="grid-3" style="gap: 16px;">
        <div style="background: rgba(245,158,11,0.08); border: 1px solid rgba(245,158,11,0.2); border-radius: 10px; padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 8px;">üéØ</div>
          <div style="font-size: 13px; font-weight: 800; color: var(--accent);">Variable 1: List Quality</div>
          <div style="font-size: 22px; font-weight: 900; color: var(--text); margin: 8px 0;">DB Donors</div>
          <div style="font-size: 12px; color: var(--muted);">avg $68/k vs DB Responders $13/k<br>5.2x higher baseline</div>
        </div>
        <div style="background: rgba(99,102,241,0.08); border: 1px solid rgba(99,102,241,0.2); border-radius: 10px; padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 8px;">üìä</div>
          <div style="font-size: 13px; font-weight: 800; color: var(--accent3);">Variable 2: Decile Score</div>
          <div style="font-size: 22px; font-weight: 900; color: var(--text); margin: 8px 0;">Decile 10</div>
          <div style="font-size: 12px; color: var(--muted);">$28.55/k vs $6-9/k for Deciles 1-7<br>3-4x yield amplifier</div>
        </div>
        <div style="background: rgba(16,185,129,0.08); border: 1px solid rgba(16,185,129,0.2); border-radius: 10px; padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 8px;">‚úçÔ∏è</div>
          <div style="font-size: 13px; font-weight: 800; color: var(--accent2);">Variable 3: Creative Match</div>
          <div style="font-size: 22px; font-weight: 900; color: var(--text); margin: 8px 0;">Right Creative</div>
          <div style="font-size: 12px; color: var(--muted);">Cr-48 @ $1,366/k vs baseline $33/k<br>41x amplifier on same list</div>
        </div>
      </div>
      <div style="margin-top: 20px; padding: 16px; background: rgba(245,158,11,0.06); border-radius: 8px; font-size: 13px; color: var(--muted); line-height: 1.6;">
        <strong style="color: var(--accent);">The Multiplication Effect:</strong> Each variable multiplies, not adds. DB Donors (5x) √ó Decile 10 (3x) √ó Right Creative (variable) creates an exponential ceiling that most campaigns never reach because they test creatives on Responders instead of Donors. 
        The question isn't "which creative works?" ‚Äî it's "which creative unlocks the nuclear zone on DB Donors Decile 10?"
      </div>
    </div>
  </div>

  <!-- CLIENTS TAB -->
  <div id="tab-clients" class="tab-panel">
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Client Performance Dashboard</div>
          <div class="card-sub">Jan‚ÄìFeb 2026 ¬∑ All active campaigns</div>
        </div>
      </div>
      <div class="table-wrap">
        <table id="clients-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Client</th>
              <th>Revenue</th>
              <th>Messages Sent</th>
              <th>Campaigns</th>
              <th>Avg Yield/k</th>
              <th>Donors</th>
              <th>Avg Donation</th>
            </tr>
          </thead>
          <tbody id="clients-tbody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- TOP CAMPAIGNS TAB -->
  <div id="tab-campaigns" class="tab-panel">
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Top 20 Campaigns by Yield/k</div>
          <div class="card-sub">Minimum 10,000 sends ¬∑ Ranked by efficiency</div>
        </div>
        <span class="badge badge-gold">Elite Performers</span>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Rank</th>
              <th>Campaign ID</th>
              <th>Client</th>
              <th>Creative</th>
              <th>Yield/k</th>
              <th>Sent</th>
              <th>Donors</th>
              <th>Revenue</th>
              <th>Decile</th>
              <th>List</th>
              <th>Launch</th>
            </tr>
          </thead>
          <tbody id="campaigns-tbody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- YIELD DECAY TAB -->
  <div id="tab-decay" class="tab-panel">
    <div class="anomaly-box">
      <div class="anomaly-title">üìâ The Yield Decay Curve</div>
      <div class="anomaly-body">
        As list size grows, yield per thousand drops ‚Äî but total revenue goes up. This is the fundamental tension in SMS fundraising.
        Small lists (<5k) average <span class="anomaly-number">$26.89/k</span>. Medium lists (20-100k) average <span class="anomaly-number">$16.82/k</span>. 
        Giant lists (500k+) average only <span class="anomaly-number">$7.01/k</span> ‚Äî but still generate millions.
        The optimal zone for <strong>efficiency</strong> is 5-20k sends. The optimal zone for <strong>total revenue</strong> is 20-100k.
      </div>
    </div>
    
    <div class="grid-2">
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Average Yield/k by List Size</div>
            <div class="card-sub">The efficiency decay curve</div>
          </div>
        </div>
        <div id="decay-yield-chart" class="bar-chart"></div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Revenue Contribution by Size</div>
            <div class="card-sub">Where the actual dollars come from</div>
          </div>
        </div>
        <div id="decay-rev-chart" class="bar-chart"></div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Size √ó Yield Matrix</div>
          <div class="card-sub">Full breakdown</div>
        </div>
      </div>
      <div class="table-wrap">
        <table id="decay-table">
          <thead>
            <tr>
              <th>List Size Bucket</th>
              <th>Campaigns</th>
              <th>Total Sent</th>
              <th>Total Revenue</th>
              <th>Rev Share</th>
              <th>Avg Yield/k</th>
              <th>Median Yield/k</th>
              <th>Recommendation</th>
            </tr>
          </thead>
          <tbody id="decay-tbody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- AGENCIES TAB -->
  <div id="tab-agencies" class="tab-panel">
    <div class="card">
      <div class="card-header">
        <div>
          <div class="card-title">Agency Performance</div>
          <div class="card-sub">Revenue and yield by agency partner</div>
        </div>
      </div>
      <div id="agency-chart" class="bar-chart" style="margin-bottom: 24px;"></div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Agency</th>
              <th>Total Revenue</th>
              <th>Messages Sent</th>
              <th>Campaigns</th>
              <th>Yield/k</th>
              <th>Rev/Campaign</th>
            </tr>
          </thead>
          <tbody id="agency-tbody"></tbody>
        </table>
      </div>
    </div>
  </div>

</div><!-- /content -->

<script>
// ============================================================
// DATA ‚Äî generated from real campaign_summary.json
// ============================================================
const DATA = {
  "meta": {
    "total_campaigns": 4119,
    "active_campaigns": 3197,
    "total_revenue": 1191205.97,
    "total_sent": 79551964,
    "total_donors": 25922,
    "total_amount_donated": 787563.95,
    "overall_yield_k": 14.97,
    "avg_donation": 30.38,
    "generated": "2026-02-20T04:05:46.095492"
  },
  "top_clients": [
    {
      "name": "Hillsdale College",
      "rev": 241806.35,
      "sent": 11647038,
      "donors": 1936,
      "campaigns": 183,
      "yield_k": 20.76,
      "avg_donation": 42.23,
      "median_yield": 16.9
    },
    {
      "name": "Medicare Advantage Majority",
      "rev": 146136.0,
      "sent": 12224814,
      "donors": 0,
      "campaigns": 163,
      "yield_k": 11.95,
      "avg_donation": 0,
      "median_yield": 8.66
    },
    {
      "name": "Trump National Committee JFC",
      "rev": 96526.74,
      "sent": 13100928,
      "donors": 4069,
      "campaigns": 307,
      "yield_k": 7.37,
      "avg_donation": 26.36,
      "median_yield": 7.14
    },
    {
      "name": "NRSC",
      "rev": 68754.65,
      "sent": 3605339,
      "donors": 1672,
      "campaigns": 229,
      "yield_k": 19.07,
      "avg_donation": 43.54,
      "median_yield": 11.19
    },
    {
      "name": "NRCC",
      "rev": 59640.19,
      "sent": 3434439,
      "donors": 2078,
      "campaigns": 244,
      "yield_k": 17.37,
      "avg_donation": 24.8,
      "median_yield": 11.38
    },
    {
      "name": "Crane, Eli (AZ-02)",
      "rev": 38020.98,
      "sent": 2148492,
      "donors": 587,
      "campaigns": 74,
      "yield_k": 17.7,
      "avg_donation": 48.54,
      "median_yield": 13.03
    },
    {
      "name": "Ramaswamy, Vivek (Gov-OH)",
      "rev": 33048.65,
      "sent": 2316640,
      "donors": 919,
      "campaigns": 89,
      "yield_k": 14.27,
      "avg_donation": 29.25,
      "median_yield": 8.81
    },
    {
      "name": "Turning Point USA",
      "rev": 25273.84,
      "sent": 2389939,
      "donors": 412,
      "campaigns": 50,
      "yield_k": 10.58,
      "avg_donation": 76.68,
      "median_yield": 9.35
    },
    {
      "name": "Coal Faith Freedom Coalition",
      "rev": 23090.54,
      "sent": 511537,
      "donors": 631,
      "campaigns": 40,
      "yield_k": 45.14,
      "avg_donation": 38.52,
      "median_yield": 15.1
    },
    {
      "name": "Johnson, Mike (LA-4 Speaker)",
      "rev": 20977.74,
      "sent": 1391883,
      "donors": 648,
      "campaigns": 61,
      "yield_k": 15.07,
      "avg_donation": 24.9,
      "median_yield": 8.51
    },
    {
      "name": "NCPD",
      "rev": 20976.59,
      "sent": 2530916,
      "donors": 750,
      "campaigns": 122,
      "yield_k": 8.29,
      "avg_donation": 37.11,
      "median_yield": 4.53
    },
    {
      "name": "RNC",
      "rev": 20742.07,
      "sent": 2014226,
      "donors": 1130,
      "campaigns": 140,
      "yield_k": 10.3,
      "avg_donation": 22.67,
      "median_yield": 6.03
    },
    {
      "name": "American Cornerstone Institute",
      "rev": 20450.0,
      "sent": 734752,
      "donors": 409,
      "campaigns": 44,
      "yield_k": 27.83,
      "avg_donation": 37.27,
      "median_yield": 20.19
    },
    {
      "name": "Gill, Brandon (TX-26)",
      "rev": 18573.91,
      "sent": 1187315,
      "donors": 1005,
      "campaigns": 66,
      "yield_k": 15.64,
      "avg_donation": 21.7,
      "median_yield": 8.18
    },
    {
      "name": "Flores, Eric (TX-34)",
      "rev": 18134.31,
      "sent": 619819,
      "donors": 546,
      "campaigns": 37,
      "yield_k": 29.26,
      "avg_donation": 33.55,
      "median_yield": 13.19
    }
  ],
  "size_decay": [
    {
      "bucket": "<5k",
      "count": 1132,
      "rev": 145471.98,
      "sent": 5410036,
      "avg_yield": 26.89,
      "median_yield": 13.26
    },
    {
      "bucket": "5-20k",
      "count": 1022,
      "rev": 204466.26,
      "sent": 11947932,
      "avg_yield": 17.11,
      "median_yield": 6.36
    },
    {
      "bucket": "20-100k",
      "count": 942,
      "rev": 549661.84,
      "sent": 32687113,
      "avg_yield": 16.82,
      "median_yield": 8.78
    },
    {
      "bucket": "100-500k",
      "count": 83,
      "rev": 209362.14,
      "sent": 17781743,
      "avg_yield": 11.77,
      "median_yield": 8.38
    },
    {
      "bucket": "500k+",
      "count": 18,
      "rev": 82243.75,
      "sent": 11725140,
      "avg_yield": 7.01,
      "median_yield": 5.63
    }
  ],
  "decile_perf": [
    {
      "decile": "Decile 10",
      "rev": 635167.62,
      "sent": 22258131,
      "count": 787,
      "yield_k": 28.54
    },
    {
      "decile": "Decile 9",
      "rev": 134206.99,
      "sent": 11500735,
      "count": 384,
      "yield_k": 11.67
    },
    {
      "decile": "Millitile 1000-951",
      "rev": 50347.27,
      "sent": 4461675,
      "count": 75,
      "yield_k": 11.28
    },
    {
      "decile": "Decile 8",
      "rev": 69093.51,
      "sent": 7301579,
      "count": 215,
      "yield_k": 9.46
    },
    {
      "decile": "Unscored",
      "rev": 168008.27,
      "sent": 18590689,
      "count": 990,
      "yield_k": 9.04
    },
    {
      "decile": "Other",
      "rev": 88014.54,
      "sent": 9868045,
      "count": 606,
      "yield_k": 8.92
    },
    {
      "decile": "Decile 7",
      "rev": 27661.39,
      "sent": 3121413,
      "count": 112,
      "yield_k": 8.86
    },
    {
      "decile": "Millitile 950-901",
      "rev": 18706.38,
      "sent": 2449697,
      "count": 28,
      "yield_k": 7.64
    }
  ],
  "weekly_trend": [
    {
      "week": "2026-W00",
      "rev": 61020.01,
      "sent": 5077025,
      "count": 103,
      "yield_k": 12.02
    },
    {
      "week": "2026-W01",
      "rev": 174791.43,
      "sent": 12445612,
      "count": 504,
      "yield_k": 14.04
    },
    {
      "week": "2026-W02",
      "rev": 180454.72,
      "sent": 14253155,
      "count": 498,
      "yield_k": 12.66
    },
    {
      "week": "2026-W03",
      "rev": 150926.24,
      "sent": 10881663,
      "count": 523,
      "yield_k": 13.87
    },
    {
      "week": "2026-W04",
      "rev": 257770.2,
      "sent": 10277286,
      "count": 503,
      "yield_k": 25.08
    },
    {
      "week": "2026-W05",
      "rev": 189471.76,
      "sent": 12120492,
      "count": 534,
      "yield_k": 15.63
    },
    {
      "week": "2026-W06",
      "rev": 176771.61,
      "sent": 14496731,
      "count": 532,
      "yield_k": 12.19
    }
  ],
  "sleeping_giants": [
    {
      "client": "Hillsdale College",
      "creative": "Cr-48",
      "best_yield": 1366.42,
      "best_sent": 11435,
      "last_used": "2026-01-27",
      "decile": "Decile 10",
      "list_type": "DB Donors",
      "best_rev": 15625.0
    },
    {
      "client": "Scalise, Steve (LA-1)",
      "creative": "Cr-179SMS",
      "best_yield": 226.57,
      "best_sent": 26735,
      "last_used": "2026-01-07",
      "decile": "Decile 10",
      "list_type": "DB Donors",
      "best_rev": 6057.25
    },
    {
      "client": "HeroBox",
      "creative": "Cr-329",
      "best_yield": 189.73,
      "best_sent": 9935,
      "last_used": "2026-01-28",
      "decile": "Unscored",
      "list_type": "Client Donors",
      "best_rev": 1885.0
    },
    {
      "client": "Crane, Eli (AZ-02)",
      "creative": "Cr-72SMS",
      "best_yield": 122.5,
      "best_sent": 21357,
      "last_used": "2026-01-29",
      "decile": "Decile 10",
      "list_type": "DB Donors",
      "best_rev": 2616.24
    },
    {
      "client": "Ramaswamy, Vivek (Gov-OH)",
      "creative": "Cr-31SMS",
      "best_yield": 102.33,
      "best_sent": 26111,
      "last_used": "2026-01-31",
      "decile": "Decile 10",
      "list_type": "DB Donors",
      "best_rev": 2671.91
    },
    {
      "client": "NRCC",
      "creative": "Cr-430",
      "best_yield": 100.06,
      "best_sent": 29286,
      "last_used": "2026-01-11",
      "decile": "Decile 10",
      "list_type": "DB Donors",
      "best_rev": 2930.23
    }
  ],
  "top_campaigns": [
    {
      "id": "178408",
      "client": "Hillsdale College",
      "creative": "Cr-48",
      "sent": 11435,
      "donors": 125,
      "rev": 15625.0,
      "yield_k": 1366.42,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-27"
    },
    {
      "id": "178487",
      "client": "Hillsdale College",
      "creative": "Cr-65SMS",
      "sent": 16109,
      "donors": 114,
      "rev": 14250.0,
      "yield_k": 884.6,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-29"
    },
    {
      "id": "WC-97253",
      "client": "Hillsdale College",
      "creative": "Cr-98SMS",
      "sent": 16217,
      "donors": 69,
      "rev": 8625.0,
      "yield_k": 531.85,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-02"
    },
    {
      "id": "WC-100055",
      "client": "Hillsdale College",
      "creative": "Cr-116",
      "sent": 15857,
      "donors": 57,
      "rev": 7125.0,
      "yield_k": 449.33,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-31"
    },
    {
      "id": "178414",
      "client": "Hillsdale College",
      "creative": "Cr-48",
      "sent": 10052,
      "donors": 24,
      "rev": 3000.0,
      "yield_k": 298.45,
      "decile": "Decile 9",
      "list": "DB Donors",
      "launch": "2026-01-28"
    },
    {
      "id": "WC-97484",
      "client": "Trump National Committee JFC",
      "creative": "Cr-712SMS",
      "sent": 11311,
      "donors": 4,
      "rev": 3206.19,
      "yield_k": 283.46,
      "decile": "Decile 7",
      "list": "DigitalDonors",
      "launch": "2026-01-05"
    },
    {
      "id": "178738",
      "client": "Hillsdale College",
      "creative": "Cr-98SMS",
      "sent": 10985,
      "donors": 24,
      "rev": 3000.0,
      "yield_k": 273.1,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-02-02"
    },
    {
      "id": "WC-100373",
      "client": "Hillsdale College",
      "creative": "Cr-119SMS",
      "sent": 15304,
      "donors": 30,
      "rev": 3750.0,
      "yield_k": 245.03,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-02-04"
    },
    {
      "id": "TF-98221",
      "client": "Crane, Eli (AZ-02)",
      "creative": "Cr-66SMSb",
      "sent": 22035,
      "donors": 74,
      "rev": 5392.89,
      "yield_k": 244.74,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-13"
    },
    {
      "id": "WC-97723",
      "client": "Scalise, Steve (LA-1)",
      "creative": "Cr-179SMS",
      "sent": 26735,
      "donors": 67,
      "rev": 6057.25,
      "yield_k": 226.57,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-07"
    },
    {
      "id": "WC-98116",
      "client": "Turning Point USA",
      "creative": "Cr-146SMS",
      "sent": 13828,
      "donors": 26,
      "rev": 3124.0,
      "yield_k": 225.92,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-12"
    },
    {
      "id": "178528",
      "client": "HeroBox",
      "creative": "Cr-343",
      "sent": 10512,
      "donors": 47,
      "rev": 2216.7,
      "yield_k": 210.87,
      "decile": "Unscored",
      "list": "Client Donors",
      "launch": "2026-02-04"
    },
    {
      "id": "178248",
      "client": "Coal Faith Freedom Coalition",
      "creative": "Cr-02SMS",
      "sent": 41442,
      "donors": 103,
      "rev": 7410.38,
      "yield_k": 178.81,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-23"
    },
    {
      "id": "178422",
      "client": "Hillsdale College",
      "creative": "Cr-48",
      "sent": 10160,
      "donors": 13,
      "rev": 1625.0,
      "yield_k": 159.94,
      "decile": "Decile 8",
      "list": "DB Donors",
      "launch": "2026-01-28"
    },
    {
      "id": "WC-97679",
      "client": "Shai Fund",
      "creative": "Cr-02SMS",
      "sent": 40661,
      "donors": 54,
      "rev": 5400.0,
      "yield_k": 132.81,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-07"
    },
    {
      "id": "178080",
      "client": "Flores, Eric (TX-34)",
      "creative": "Cr-03SMS",
      "sent": 41486,
      "donors": 176,
      "rev": 5188.76,
      "yield_k": 125.07,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-21"
    },
    {
      "id": "WC-99911",
      "client": "Crane, Eli (AZ-02)",
      "creative": "Cr-72SMS",
      "sent": 21357,
      "donors": 61,
      "rev": 2616.24,
      "yield_k": 122.5,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-29"
    },
    {
      "id": "179096",
      "client": "NRSC",
      "creative": "Cr-2030SMS",
      "sent": 14907,
      "donors": 2,
      "rev": 1805.0,
      "yield_k": 121.08,
      "decile": "Decile 10",
      "list": "DB Responders",
      "launch": "2026-02-09"
    },
    {
      "id": "WC-100441",
      "client": "NRSC",
      "creative": "Cr-2166SMS",
      "sent": 21869,
      "donors": 49,
      "rev": 2501.55,
      "yield_k": 114.39,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-02-04"
    },
    {
      "id": "WC-98929",
      "client": "Crane, Eli (AZ-02)",
      "creative": "Cr-66SMSb",
      "sent": 18497,
      "donors": 44,
      "rev": 2101.22,
      "yield_k": 113.6,
      "decile": "Decile 10",
      "list": "DB Donors",
      "launch": "2026-01-21"
    }
  ],
  "agency_perf": [
    {
      "agency": "NextAfter",
      "rev": 301035.35,
      "sent": 13361383,
      "campaigns": 283,
      "yield_k": 22.53
    },
    {
      "agency": "DonorBureau",
      "rev": 263514.51,
      "sent": 23232107,
      "campaigns": 1005,
      "yield_k": 11.34
    },
    {
      "agency": "PLUS",
      "rev": 234832.5,
      "sent": 18086430,
      "campaigns": 562,
      "yield_k": 12.98
    },
    {
      "agency": "Targeted Victory",
      "rev": 118745.19,
      "sent": 6448930,
      "campaigns": 313,
      "yield_k": 18.41
    },
    {
      "agency": "AMMC (aka NPA)",
      "rev": 41752.24,
      "sent": 2223285,
      "campaigns": 157,
      "yield_k": 18.78
    },
    {
      "agency": "Convert Digital",
      "rev": 27355.53,
      "sent": 1632566,
      "campaigns": 88,
      "yield_k": 16.76
    },
    {
      "agency": "Euporie",
      "rev": 25670.81,
      "sent": 1412173,
      "campaigns": 92,
      "yield_k": 18.18
    },
    {
      "agency": "Active Engagement",
      "rev": 25301.76,
      "sent": 2394944,
      "campaigns": 51,
      "yield_k": 10.56
    },
    {
      "agency": "RedWing Strategies",
      "rev": 23043.86,
      "sent": 1476447,
      "campaigns": 79,
      "yield_k": 15.61
    },
    {
      "agency": "Bert & Jim",
      "rev": 21591.17,
      "sent": 2556373,
      "campaigns": 127,
      "yield_k": 8.45
    },
    {
      "agency": "Imperator Ltd.",
      "rev": 18672.87,
      "sent": 629643,
      "campaigns": 39,
      "yield_k": 29.66
    },
    {
      "agency": "Launchpad Strategies",
      "rev": 13585.68,
      "sent": 1350265,
      "campaigns": 51,
      "yield_k": 10.06
    }
  ]
};


// Cr-48 detailed data
const CR48_DATA = [
  { label: 'DB Donors D10 (11k)', yield: 1366.4, type: 'nuclear' },
  { label: 'DB Donors D10 (4.9k)', yield: 1216.1, type: 'nuclear' },
  { label: 'DB Donors D10 (5k)', yield: 531.8, type: 'nuclear' },
  { label: 'DB Donors D10 (15.8k)', yield: 449.3, type: 'nuclear' },
  { label: 'DB Donors D9 (10k)', yield: 298.4, type: 'hot' },
  { label: 'DB Donors D10 (5k)', yield: 201.9, type: 'hot' },
  { label: 'DB Donors D10 (10.1k)', yield: 159.9, type: 'hot' },
  { label: 'DB Donors D10 (16.3k)', yield: 68.8, type: 'good' },
  { label: 'DB Donors D5 (16.3k)', yield: 68.6, type: 'good' },
  { label: 'DB Responders D10 (77k)', yield: 45.0, type: 'good' },
  { label: 'DB Responders D10 (22.9k)', yield: 43.7, type: 'good' },
  { label: 'DB Responders D10 (210k)', yield: 33.8, type: 'avg' },
  { label: 'DB Responders D9 (77k)', yield: 27.3, type: 'avg' },
  { label: 'DB Responders D10 (209k)', yield: 22.7, type: 'avg' },
];

const LIST_COMPARISON = [
  { label: 'DB Donors D10', yield: 68.33, color: '#f59e0b' },
  { label: 'DB Donors D9', yield: 20.66, color: '#f59e0b' },
  { label: 'DB Donors D8', yield: 17.13, color: '#f59e0b' },
  { label: 'DB Donors Unscored', yield: 28.89, color: '#f59e0b' },
  { label: 'DB Responders D10', yield: 13.53, color: '#6366f1' },
  { label: 'DB Responders D9', yield: 10.0, color: '#6366f1' },
  { label: 'DB Responders Unscored', yield: 16.39, color: '#6366f1' },
];

// ============================================================
// UI FUNCTIONS
// ============================================================
function switchTab(name) {
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  event.target.classList.add('active');
}

function fmtMoney(n) {
  if (n >= 1000000) return '$' + (n/1000000).toFixed(1) + 'M';
  if (n >= 1000) return '$' + (n/1000).toFixed(0) + 'k';
  return '$' + n.toFixed(0);
}
function fmtNum(n) {
  if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
  if (n >= 1000) return (n/1000).toFixed(0) + 'k';
  return n.toString();
}
function yieldClass(y) {
  if (y >= 200) return 'yield-nuclear';
  if (y >= 50) return 'yield-hot';
  if (y >= 20) return 'yield-good';
  return 'yield-avg';
}

function makeBarChart(containerId, items, { labelKey, valueKey, color = '#f59e0b', fmt = v => '$' + v.toFixed(1) + '/k', maxOverride } = {}) {
  const el = document.getElementById(containerId);
  if (!el) return;
  const max = maxOverride || Math.max(...items.map(i => i[valueKey]));
  el.innerHTML = items.map(item => {
    const pct = (item[valueKey] / max * 100).toFixed(1);
    const c = item.color || color;
    return `<div class="bar-row">
      <div class="bar-label" title="${item[labelKey]}">${item[labelKey]}</div>
      <div class="bar-track">
        <div class="bar-fill" style="width:${pct}%;background:${c}">${fmt(item[valueKey])}</div>
      </div>
    </div>`;
  }).join('');
}

// ============================================================
// RENDER FUNCTIONS
// ============================================================
function renderStats() {
  const m = DATA.meta;
  const strips = [
    { label: 'Total Revenue', value: '$' + (m.total_revenue/1000).toFixed(0) + 'k', sub: 'Jan‚ÄìFeb 2026', cls: '' },
    { label: 'Campaigns Run', value: m.active_campaigns.toLocaleString(), sub: 'of ' + m.total_campaigns.toLocaleString() + ' total', cls: 'green' },
    { label: 'Messages Sent', value: (m.total_sent/1000000).toFixed(1) + 'M', sub: 'text messages', cls: 'purple' },
    { label: 'Avg Yield/k', value: '$' + m.overall_yield_k, sub: 'per 1,000 sent', cls: '' },
    { label: 'Total Donors', value: m.total_donors.toLocaleString(), sub: 'unique donors', cls: 'green' },
    { label: 'Avg Donation', value: '$' + m.avg_donation.toFixed(2), sub: 'per donor', cls: '' },
    { label: 'Amount Donated', value: '$' + (m.total_amount_donated/1000).toFixed(0) + 'k', sub: 'actual donations', cls: 'purple' },
  ];
  document.getElementById('stats-strip').innerHTML = strips.map(s =>
    `<div class="stat-card ${s.cls}">
      <div class="stat-label">${s.label}</div>
      <div class="stat-value">${s.value}</div>
      <div class="stat-sub">${s.sub}</div>
    </div>`
  ).join('');
}

function renderWeeklyCharts() {
  const weeks = DATA.weekly_trend;
  makeBarChart('weekly-chart', weeks.map(w => ({
    'Week': w.week.replace('2026-', ''),
    'Revenue': w.rev
  })), { labelKey: 'Week', valueKey: 'Revenue', fmt: v => fmtMoney(v) });

  // Remap for yield chart
  const maxYield = Math.max(...weeks.map(w => w.yield_k));
  const el = document.getElementById('weekly-yield-chart');
  el.innerHTML = weeks.map(w => {
    const pct = (w.yield_k / maxYield * 100).toFixed(1);
    const isSpike = w.yield_k >= 20;
    const color = isSpike ? '#f59e0b' : '#6366f1';
    return `<div class="bar-row">
      <div class="bar-label">${w.week.replace('2026-','')}</div>
      <div class="bar-track">
        <div class="bar-fill" style="width:${pct}%;background:${color}">$${w.yield_k.toFixed(2)}/k</div>
      </div>
      ${isSpike ? '<div class="bar-value" style="color:#f59e0b">üî• Peak</div>' : ''}
    </div>`;
  }).join('');
}

function renderDecileChart() {
  const items = DATA.decile_perf
    .filter(d => ['Decile 10','Decile 9','Decile 8','Decile 7','Millitile 1000-951','Unscored'].includes(d.decile))
    .slice(0, 7);
  makeBarChart('decile-chart', items.map(d => ({
    label: d.decile,
    val: d.yield_k,
    color: d.decile === 'Decile 10' ? '#f59e0b' : '#6366f1'
  })), { labelKey: 'label', valueKey: 'val', fmt: v => '$' + v.toFixed(1) + '/k' });
}

function renderClientChart() {
  const top8 = DATA.top_clients.slice(0, 8);
  makeBarChart('client-chart', top8.map(c => ({
    label: c.name.length > 18 ? c.name.slice(0,18)+'‚Ä¶' : c.name,
    fullName: c.name,
    val: c.rev,
    color: '#10b981'
  })), { labelKey: 'label', valueKey: 'val', fmt: v => fmtMoney(v) });
}

function renderKeyInsights() {
  const insights = [
    {
      icon: 'üî•',
      cls: '',
      title: 'The Hillsdale Anomaly: $1,366/k on 11k sends',
      body: 'Campaign 178408 (Cr-48, DB Donors, Decile 10) hit <span class="insight-metric">$1,366/k</span> ‚Äî 80x the Hillsdale baseline of $16.9/k. This creative is dormant in February. Redeployment opportunity exists now.'
    },
    {
      icon: 'üí§',
      cls: 'green',
      title: '6 sleeping giants ‚Äî high-yield combos sitting idle in February',
      body: 'Six client √ó creative combinations that crushed $100+/k in January have gone dark in February. Total unrealized yield potential is enormous. See the Sleeping Giants tab.'
    },
    {
      icon: 'üìâ',
      cls: 'purple',
      title: 'Week 4 yield spike: $25.08/k vs. normal $12-14/k',
      body: 'Week of Feb 2 saw a <span class="insight-metric">$257k</span> revenue week driven largely by Hillsdale College\'s nuclear Cr-48 sends to DB Donors Decile 10. The spike was real and driven by 3 concentrated sends.'
    },
    {
      icon: 'üìä',
      cls: 'red',
      title: 'DB Donors Decile 10 averages $68.33/k ‚Äî 5x the DB Responders baseline',
      body: 'The single most important variable in campaign performance is list type. DB Donors D10 ($68/k) vs DB Responders D10 ($13.53/k) ‚Äî same decile, <span class="insight-metric">5x different yield</span>. This gap is being underexploited.'
    },
    {
      icon: 'üèÜ',
      cls: 'green',
      title: 'NextAfter outperforms DonorBureau-direct at $22.53/k vs $11.34/k',
      body: 'Agency analysis shows NextAfter campaigns average <span class="insight-metric">$22.53/k</span> versus DonorBureau-direct campaigns at $11.34/k. Understanding their creative formula could unlock efficiency gains across all clients.'
    },
    {
      icon: 'üí∞',
      cls: 'purple',
      title: 'Hillsdale donors give $42.23 avg vs Trump JFC $26.36 ‚Äî but Hillsdale has 80% fewer donors',
      body: 'Hillsdale College has the <span class="insight-metric">highest average donation</span> ($42.23) among major clients. The opportunity: Hillsdale converts at high dollar amounts but low volume ‚Äî the model suggests a deeper donor list is available if the right creative unlocks it.'
    }
  ];
  
  document.getElementById('key-insights').innerHTML = insights.map(i =>
    `<div class="insight-item ${i.cls}">
      <div class="insight-icon">${i.icon}</div>
      <div>
        <div class="insight-title">${i.title}</div>
        <div class="insight-body">${i.body}</div>
      </div>
    </div>`
  ).join('');
}

function renderGiants() {
  const giants = DATA.sleeping_giants;
  const labels = ['#1 HIGHEST YIELD', '#2', '#3', '#4', '#5', '#6'];
  document.getElementById('giants-grid').innerHTML = giants.map((g, i) => `
    <div class="giant-card">
      <div class="giant-rank">${labels[i] || '#' + (i+1)}</div>
      <div class="giant-client">${g.client}</div>
      <div class="giant-creative">${g.creative}</div>
      <div class="giant-stats">
        <div class="giant-stat">
          <div class="giant-stat-label">Best Yield/k</div>
          <div class="giant-stat-val">$${g.best_yield.toFixed(0)}</div>
        </div>
        <div class="giant-stat">
          <div class="giant-stat-label">Last Send Size</div>
          <div class="giant-stat-val">${fmtNum(g.best_sent)}</div>
        </div>
        <div class="giant-stat">
          <div class="giant-stat-label">Best Revenue</div>
          <div class="giant-stat-val">${fmtMoney(g.best_rev)}</div>
        </div>
      </div>
      <div class="giant-meta">
        üìÖ Last used: ${g.last_used} &nbsp;|&nbsp; 
        üéØ ${g.decile} &nbsp;|&nbsp; 
        üìã ${g.list_type}
      </div>
      <div class="action-btn" onclick="alert('Deploy ${g.creative} to ${g.client} (${g.list_type}, ${g.decile})\\nExpected yield: $${g.best_yield.toFixed(0)}/k')">
        ‚ñ∂ Re-Deploy This Combination
      </div>
    </div>
  `).join('');
}

function renderAnomaly() {
  const max = Math.max(...CR48_DATA.map(d => d.yield));
  document.getElementById('cr48-chart').innerHTML = CR48_DATA.map(d => {
    const pct = (d.yield / max * 100).toFixed(1);
    const color = d.type === 'nuclear' ? '#f59e0b' : d.type === 'hot' ? '#ef4444' : d.type === 'good' ? '#10b981' : '#6366f1';
    return `<div class="bar-row">
      <div class="bar-label">${d.label}</div>
      <div class="bar-track">
        <div class="bar-fill" style="width:${pct}%;background:${color}">$${d.yield.toFixed(0)}/k</div>
      </div>
    </div>`;
  }).join('');
  
  const maxList = Math.max(...LIST_COMPARISON.map(d => d.yield));
  document.getElementById('list-comparison-chart').innerHTML = LIST_COMPARISON.map(d => {
    const pct = (d.yield / maxList * 100).toFixed(1);
    return `<div class="bar-row">
      <div class="bar-label">${d.label}</div>
      <div class="bar-track">
        <div class="bar-fill" style="width:${pct}%;background:${d.color}">$${d.yield.toFixed(2)}/k</div>
      </div>
    </div>`;
  }).join('');
}

function renderClients() {
  const totalRev = DATA.meta.total_revenue;
  document.getElementById('clients-tbody').innerHTML = DATA.top_clients.map((c, i) => `
    <tr>
      <td>${i+1}</td>
      <td><strong>${c.name}</strong></td>
      <td><strong>${fmtMoney(c.rev)}</strong></td>
      <td>${(c.sent/1000000).toFixed(2)}M</td>
      <td>${c.campaigns}</td>
      <td><span class="yield-pill ${yieldClass(c.yield_k)}">$${c.yield_k.toFixed(2)}/k</span></td>
      <td>${c.donors.toLocaleString()}</td>
      <td>${c.avg_donation > 0 ? '$' + c.avg_donation.toFixed(2) : '‚Äî'}</td>
    </tr>
  `).join('');
}

function renderCampaigns() {
  document.getElementById('campaigns-tbody').innerHTML = DATA.top_campaigns.map((c, i) => `
    <tr>
      <td>${i+1}</td>
      <td class="td-mono">${c.id}</td>
      <td>${c.client.length > 25 ? c.client.slice(0,25) + '‚Ä¶' : c.client}</td>
      <td class="td-mono">${c.creative}</td>
      <td><span class="yield-pill ${yieldClass(c.yield_k)}">$${c.yield_k.toFixed(1)}/k</span></td>
      <td>${fmtNum(c.sent)}</td>
      <td>${c.donors}</td>
      <td>${fmtMoney(c.rev)}</td>
      <td>${c.decile}</td>
      <td>${c.list}</td>
      <td>${c.launch}</td>
    </tr>
  `).join('');
}

function renderDecay() {
  const recs = {
    '<5k': 'Test new creatives here ‚Äî high ceiling but small volume',
    '5-20k': '‚≠ê Sweet spot for efficiency ‚Äî best yield/k in meaningful volume',
    '20-100k': 'üí∞ Revenue engine ‚Äî 46% of all revenue in this zone',
    '100-500k': 'Scale with proven winners only ‚Äî yield drops sharply',
    '500k+': 'Awareness plays ‚Äî low efficiency, high reach'
  };
  
  const totalRev = DATA.size_decay.reduce((s, d) => s + d.rev, 0);
  const maxYield = Math.max(...DATA.size_decay.map(d => d.avg_yield));
  const maxRev = Math.max(...DATA.size_decay.map(d => d.rev));
  
  makeBarChart('decay-yield-chart', DATA.size_decay.map(d => ({
    label: d.bucket,
    val: d.avg_yield,
    color: d.avg_yield === maxYield ? '#f59e0b' : '#6366f1'
  })), { labelKey: 'label', valueKey: 'val', fmt: v => '$' + v.toFixed(2) + '/k' });
  
  makeBarChart('decay-rev-chart', DATA.size_decay.map(d => ({
    label: d.bucket,
    val: d.rev,
    color: d.rev === maxRev ? '#10b981' : '#6366f1'
  })), { labelKey: 'label', valueKey: 'val', fmt: v => fmtMoney(v) });
  
  document.getElementById('decay-tbody').innerHTML = DATA.size_decay.map(d => `
    <tr>
      <td><strong>${d.bucket}</strong></td>
      <td>${d.count.toLocaleString()}</td>
      <td>${fmtNum(d.sent)}</td>
      <td>${fmtMoney(d.rev)}</td>
      <td>${(d.rev/totalRev*100).toFixed(1)}%</td>
      <td><span class="yield-pill ${yieldClass(d.avg_yield)}">$${d.avg_yield.toFixed(2)}/k</span></td>
      <td>$${d.median_yield.toFixed(2)}/k</td>
      <td style="color: var(--muted); font-size: 12px;">${recs[d.bucket] || ''}</td>
    </tr>
  `).join('');
}

function renderAgencies() {
  const maxRev = Math.max(...DATA.agency_perf.map(a => a.rev));
  makeBarChart('agency-chart', DATA.agency_perf.map(a => ({
    label: a.agency.length > 18 ? a.agency.slice(0,18) + '‚Ä¶' : a.agency,
    val: a.rev,
    color: '#10b981'
  })), { labelKey: 'label', valueKey: 'val', fmt: v => fmtMoney(v) });
  
  document.getElementById('agency-tbody').innerHTML = DATA.agency_perf.map(a => `
    <tr>
      <td><strong>${a.agency}</strong></td>
      <td>${fmtMoney(a.rev)}</td>
      <td>${fmtNum(a.sent)}</td>
      <td>${a.campaigns}</td>
      <td><span class="yield-pill ${yieldClass(a.yield_k)}">$${a.yield_k.toFixed(2)}/k</span></td>
      <td>${fmtMoney(a.rev / a.campaigns)}</td>
    </tr>
  `).join('');
}

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  renderStats();
  renderWeeklyCharts();
  renderDecileChart();
  renderClientChart();
  renderKeyInsights();
  renderGiants();
  renderAnomaly();
  renderClients();
  renderCampaigns();
  renderDecay();
  renderAgencies();
});
</script>
</body>
</html>
